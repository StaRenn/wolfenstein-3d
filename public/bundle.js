(()=>{"use strict";var t={525:(t,e,i)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.ENEMY_FACING_DIRECTION_MAP=e.NEIGHBOR_OFFSET=e.OBSTACLE_SIDES=e.INTERSECTION_TYPES=e.ITEMS_PURPOSES=e.WEAPONS=e.DEFAULT_RESOLUTION_SCALE=e.DEFAULT_FOV=e.DEFAULT_FOV_DEGREES=e.ENEMY_VIEW_DISTANCE=e.WOLF_ATTACK_FOV=e.ENEMY_FOV=e.ACTOR_SPEED=e.OBSTACLES_MOVE_SPEED=e.MAP_SCALE=e.HUD_WIDTH_COEFFICIENT=e.DOOR_TIMEOUT=e.RESOLUTIONS_SCALE_VALUES=e.DEFAULT_FRAME_DURATION=e.TEXTURE_SIZE=e.DOOR_SIDE_WALL_TEXTURE_DARK_ID=e.DOOR_SIDE_WALL_TEXTURE_ID=e.AMMO_ID=e.DOOR_IDS=e.RAY_LENGTH=e.TILE_SIZE=void 0;var o=i(770),r=i(380),a=i(882);e.TILE_SIZE=10,e.RAY_LENGTH=48*e.TILE_SIZE,e.DOOR_IDS=[27,28,33,34,35,36],e.AMMO_ID=34,e.DOOR_SIDE_WALL_TEXTURE_ID=30,e.DOOR_SIDE_WALL_TEXTURE_DARK_ID=29,e.TEXTURE_SIZE=64,e.DEFAULT_FRAME_DURATION=1e3/60,e.RESOLUTIONS_SCALE_VALUES=[.5,1],e.DOOR_TIMEOUT=4e3,e.HUD_WIDTH_COEFFICIENT=.6,e.MAP_SCALE=.6,e.OBSTACLES_MOVE_SPEED=e.TILE_SIZE/(4*e.TILE_SIZE),e.ACTOR_SPEED=1,e.ENEMY_FOV=(0,a.toRadians)(120),e.WOLF_ATTACK_FOV=(0,a.toRadians)(15),e.ENEMY_VIEW_DISTANCE=16*e.TILE_SIZE,e.DEFAULT_FOV_DEGREES=90,e.DEFAULT_FOV=(0,a.toRadians)(e.DEFAULT_FOV_DEGREES),e.DEFAULT_RESOLUTION_SCALE=.5,window.TIME_SCALE=1,e.WEAPONS={KNIFE:{frameSet:(0,o.fillWeaponFrameSet)("KNIFE",50),maxDistance:2*e.TILE_SIZE,minDamage:50,maxDamage:50,frameDuration:50,ammoPerAttack:0,attackFrameIdx:2,icon:(0,r.getImageWithSource)("src/assets/hud/knife.png")},PISTOL:{frameSet:(0,o.fillWeaponFrameSet)("PISTOL",65),maxDistance:20*e.TILE_SIZE,minDamage:25,maxDamage:130,frameDuration:65,ammoPerAttack:1,attackFrameIdx:2,icon:(0,r.getImageWithSource)("src/assets/hud/pistol.png")},MACHINE_GUN:{frameSet:(0,o.fillWeaponFrameSet)("MACHINE_GUN",22.5),maxDistance:20*e.TILE_SIZE,minDamage:20,maxDamage:65,frameDuration:22.5,ammoPerAttack:1,attackFrameIdx:2,icon:(0,r.getImageWithSource)("src/assets/hud/machine_gun.png")}},e.ITEMS_PURPOSES={34:{affects:"ammo",value:8},35:{affects:"health",value:10},39:{affects:"health",value:25},36:{affects:"score",value:100},37:{affects:"score",value:1},38:{affects:"score",value:500},42:{affects:"score",value:1e3},40:{affects:"weapons",value:"MACHINE_GUN"},41:{affects:"weapons",value:"MACHINE_GUN"}},e.INTERSECTION_TYPES={VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL"},e.OBSTACLE_SIDES={TOP:"TOP",BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT"},e.NEIGHBOR_OFFSET=((n={})[e.OBSTACLE_SIDES.TOP]=-1,n[e.OBSTACLE_SIDES.BOTTOM]=1,n[e.OBSTACLE_SIDES.LEFT]=-1,n[e.OBSTACLE_SIDES.RIGHT]=1,n),e.ENEMY_FACING_DIRECTION_MAP={WEST:0,NORTH:90,EAST:180,SOUTH:-90}},798:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ACTOR_PORTRAIT_FRAME_SETS=e.PORTRAIT_HEIGHT=e.PORTRAIT_WIDTH=e.WEAPON_ICON_HEIGHT=e.WEAPON_ICON_WIDTH=e.FONT_SYMBOL_HEIGHT=e.FONT_SYMBOL_WIDTH=e.FONT_IMAGE=e.HUD_PANEL=void 0;var n=i(770),o=i(380);e.HUD_PANEL={TEXTURE:(0,o.getImageWithSource)("src/assets/hud/panel.png"),WIDTH:400,HEIGHT:40,INFO_Y_OFFSET:16,WEAPON_Y_OFFSET:8,LEVEL_X_OFFSET:65,SCORE_X_OFFSET:111,LIVES_X_OFFSET:156,HEALTH_X_OFFSET:219,AMMO_X_OFFSET:262,WEAPON_X_OFFSET:296,PORTRAIT_X_OFFSET:174,PORTRAIT_Y_OFFSET:5},e.FONT_IMAGE=(0,o.getImageWithSource)("src/assets/hud/font.png"),e.FONT_SYMBOL_WIDTH=8,e.FONT_SYMBOL_HEIGHT=16,e.WEAPON_ICON_WIDTH=48,e.WEAPON_ICON_HEIGHT=24,e.PORTRAIT_WIDTH=30,e.PORTRAIT_HEIGHT=31,e.ACTOR_PORTRAIT_FRAME_SETS={HEALTHY:(0,n.fillPortraitFrameSet)("HEALTHY"),JUST_A_SCRATCH:(0,n.fillPortraitFrameSet)("JUST_A_SCRATCH"),MINOR_DAMAGE:(0,n.fillPortraitFrameSet)("MINOR_DAMAGE"),MODERATE_DAMAGE:(0,n.fillPortraitFrameSet)("MODERATE_DAMAGE"),SEVERE_DAMAGE:(0,n.fillPortraitFrameSet)("SEVERE_DAMAGE"),SUFFERING:(0,n.fillPortraitFrameSet)("SUFFERING"),NEAR_DEATH:(0,n.fillPortraitFrameSet)("NEAR_DEATH"),DEAD:[{data:(0,o.getImageWithSource)("src/assets/hud/portrait/dead/frame_0.png"),duration:1e4}]}},300:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0,e.map=[[0,0,1,1,1,1,1,"1_ID617_END",1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,1,1,1,1,3,1,1,1,1,3,3,1,1,3,1,1,3,3,1,1,3,3,3],[0,0,1,"39_SPRITE_HOLLOW_ITEM",0,0,0,0,"41_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3,1,1,1,3,3,"5_ID6037_END",1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,3],[37,37,1,3,"1_ID614_START",3,1,"1_ID617_START",3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",0,0,0,0,0,1,"39_SPRITE_HOLLOW_ITEM",0,"39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,0,0,3,0,"24_SPRITE_HOLLOW",0,27,0,"24_SPRITE_HOLLOW",0,0,0,"24_SPRITE_HOLLOW",0,5],[37,0,0,0,0,1,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","1_ID5810_END",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"35_SPRITE_HOLLOW_ITEM","11_SPRITE",0,0,"ENEMY_GUARD_IDLE_WEST","11_SPRITE",0,3,1,"5_ID6037_START",1,3,0,0,3,0,0,0,0,0,1,0,0,3,0,0,0,1,0,0,0,0,0,0,0,1],[37,0,37,1,"1_ID614_END",1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,1,1,3,1,0,0,0,3],[37,0,37,1,1,1,1,1,3,1,"1_ID5810_START",11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,27,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,27,0,0,0,1,"42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,0,0,0,1],[37,0,37,3,"34_SPRITE_HOLLOW_ITEM",0,0,0,"34_SPRITE_HOLLOW_ITEM",0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,"ENEMY_GUARD_IDLE_EAST",1,"ENEMY_GUARD_IDLE_EAST",0,0,1,"38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,"39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,"11_SPRITE","23_SPRITE_HOLLOW",0,0,"11_SPRITE",0,3,0,0,0,3,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,3,0,0,1,0,0,0,1,"42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,3,1,3,1,0,1,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,0,0,1,1,27,1,1,1,1,3,1,1,11,1,1,1,0,0,3,1,3,1,3,0,1,3,1,3,3,1,1,3,1,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,"42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,0,0,0,1],[37,0,37,0,1,1,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,1,0,0,0,0,0,0,1,3,0,1,0,"ENEMY_GUARD_IDLE_EAST",0,1,0,3,"1_SPRITE",0,0,0,0,0,0,3,0,0,0,3,1,1,1,1,1,27,1,1,3,3,1,1,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,1,1,"1_SPRITE",0,0,0,0,0,3,"1_SPRITE",0,0,0,0,0,0,1,1,3,0,0,0,3,1,1,0,0,"22_SPRITE_HOLLOW",0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,3,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,0,0,1,0,0,0,3],[37,0,37,3,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,"ENEMY_GUARD_IDLE_NORTH",0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,"16_SPRITE",1,"1_SPRITE",0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,1,0,0,0,1,1,27,1,1,1,1,3,3,1,3,3,1,1,3,1,1,0,0,0,1,0,0,0,1],[37,0,37,3,0,"14_SPRITE",0,0,"ENEMY_GUARD_IDLE_WEST","13_SPRITE",0,3,0,"22_SPRITE_HOLLOW",0,0,0,"16_SPRITE","16_SPRITE",3,"1_SPRITE","1_SPRITE",0,0,0,3,3,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,1,1,0,0,0,0,0,"35_SPRITE_HOLLOW_ITEM",1,"1_SPRITE","1_SPRITE",0,0,"ENEMY_GUARD_IDLE_EAST",1,0,3,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,1,3,1,1,3,1,1,1,1,3,1,27,1,3,1,1,3,1,3,1,3,1,0,3,1,1,3,1,1,1,1,3,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[37,0,37,1,1,"12_SPRITE",1,"12_SPRITE",3,"12_SPRITE",1,1,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,11,0,"24_SPRITE_HOLLOW",0,"11_ID4543_START",0,"11_ID4543_END",1,1,3,3,1,3,1,3,3,1,1,1,1,3,0,0,0,1],[37,0,37,1,"12_SPRITE",0,0,0,0,0,0,1,0,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,"18_SPRITE",1,0,0,0,0,0,0,0,1,0,"6_SPRITE","ENEMY_GUARD_IDLE_NORTH",0,0,"6_SPRITE",0,1,0,0,0,1,0,0,0,1,1,1,31,5,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,"ENEMY_GUARD_IDLE_EAST",0,3,0,31,0,33,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,0,0,0,1],[37,0,37,1,"12_SPRITE","ENEMY_GUARD_IDLE_NORTH",0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,1,1,0,0,0,0,0,0,0,1,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,3,0,0,0,3,0,1,31,5,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,1,35,3,1,1,3,1,3,0,0,0,1,1,0,1,1,0,0,0,1,0,0,0,3],[37,0,37,1,"12_SPRITE",0,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,3,"16_SPRITE",0,0,0,0,0,"17_SPRITE",1,0,0,0,0,0,0,0,1,0,"6_SPRITE",0,0,0,"6_SPRITE",0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1],[37,0,37,1,1,0,0,0,0,0,0,1,"16_SPRITE","16_SPRITE",0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,1,0,"24_SPRITE_HOLLOW",0,1,0,0,0,1,0,0,0,1],[37,0,37,0,1,1,1,27,1,1,3,1,3,1,3,3,1,3,1,1,0,0,0,0,0,0,0,1,1,1,1,27,1,1,1,1,0,0,0,3,0,0,0,1,0,0,0,0,0,0,0,1,"38_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_EAST","38_SPRITE_HOLLOW_ITEM",1,0,0,0,3,0,0,0,3],[37,0,37,1,1,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,1,0,0,0,3,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,"2_SPRITE",0,0,0,"2_SPRITE",0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,1,0,0,0,3,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,"24_SPRITE_HOLLOW",0,1],[37,0,37,3,0,0,0,"25_SPRITE_HOLLOW",0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[37,0,37,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,3,1,5,3,3,1,1,1,1,1,3,3,5,3,1,1,3,1,1,3,1,11,27,11,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,"2_SPRITE",0,0,0,"2_SPRITE",0,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,3,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,7,1,3,3,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[37,0,37,1,3,3,1,27,1,3,3,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,3,1,1,3,3,1,3,1,1,0,0,"ENEMY_GUARD_IDLE_WEST",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,1,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,1,1,3,11,3,11,3,1,1,0,0,0,0,0,0,0,1,3,0,"38_SPRITE_HOLLOW_ITEM",0,"35_SPRITE_HOLLOW_ITEM",0,1,1,0,0,0,3,0,0,0,23,23,23,23,21,23,27,23,23,23,27,23,21,23,23,23,23,0,0,0,1],[37,0,37,3,0,"6_SPRITE",0,0,0,"6_SPRITE",0,1,0,"10_SPRITE",0,"10_SPRITE",0,"10_SPRITE",0,3,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,"ENEMY_GUARD_IDLE_EAST",0,3,0,"7_SPRITE",0,"38_SPRITE_HOLLOW_ITEM",0,"7_SPRITE",0,1,0,0,0,1,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,"38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",0,"36_SPRITE_HOLLOW_ITEM",1,0,0,0,1,0,0,0,23,"38_SPRITE_HOLLOW_ITEM",0,"2_SPRITE",0,"2_SPRITE",0,"38_SPRITE_HOLLOW_ITEM",23,0,0,"2_SPRITE",0,"2_SPRITE",0,0,23,0,0,0,1],[37,0,37,3,0,"6_SPRITE",0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,"36_SPRITE_HOLLOW_ITEM",3,0,0,0,7,0,0,0,23,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,23,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,"ENEMY_GUARD_IDLE_EAST",0,23,0,0,0,7],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,"35_SPRITE_HOLLOW_ITEM",0,1,"ENEMY_GUARD_IDLE_WEST",0,0,1,0,0,0,23,0,0,"2_SPRITE",0,"2_SPRITE",0,"ENEMY_GUARD_IDLE_EAST",23,"36_SPRITE_HOLLOW_ITEM",0,"2_SPRITE",0,"2_SPRITE",0,"34_SPRITE_HOLLOW_ITEM",23,0,0,0,1],[37,0,37,1,0,"6_SPRITE",0,"6_SPRITE",0,"6_SPRITE",0,1,0,"10_SPRITE",0,"10_SPRITE",0,"10_SPRITE",0,3,0,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,3,"ENEMY_GUARD_IDLE_EAST","7_SPRITE",0,"42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","7_SPRITE",0,1,0,0,0,3,0,0,0,23,0,0,"42_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",0,0,23,"36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",0,"42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",23,0,0,0,1],[37,0,37,3,0,0,0,0,0,0,0,1,1,3,11,1,11,1,1,3,0,0,0,0,0,0,0,1,1,"36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,3,0,0,0,1,0,0,0,23,23,23,23,19,23,23,23,23,23,23,23,19,23,23,23,23,0,0,0,3],[37,0,37,1,3,1,1,1,3,1,1,1,0,0,0,0,1,1,1,1,1,1,3,1,1,3,1,1,3,3,1,1,1,3,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,37,37,37,37,37,37,37,37,37,37,37,37,37,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,0,0,0,0,0,0,0,"38_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",37,1,"ENEMY_GUARD_IDLE_NORTH",0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,"39_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",37,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,3,1,1,3,1,1,3,1,3,5,1,1,3,1,1,3,1,3,3,5,1,1],[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,1,3,1,3,27,1,1,1,1,1,1,1,3,27,3,1,1,1,1,1,1,1,3,15,15,17,17,15,15,17,15,15,17,17,15,17,17,15,17,15,15,17,15,17,15,17,17,17],[1,1,3,1,1,1,3,1,0,3,1,11,3,1,0,3,1,3,1,0,0,0,1,5,3,3,5,3,0,0,0,3,3,1,0,3,1,1,1,15,0,0,0,0,0,17,0,0,0,0,"35_SPRITE_HOLLOW_ITEM",15,0,0,0,0,0,15,"23_SPRITE_HOLLOW",0,0,"35_SPRITE_HOLLOW_ITEM",0,15],[1,0,0,0,0,0,0,1,5,3,0,0,0,1,7,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,11,1,0,0,1,15,0,0,"2_SPRITE","26_SPRITE_HOLLOW",0,17,0,0,"2_SPRITE",0,0,17,0,0,"2_SPRITE",0,0,17,0,0,"2_SPRITE",0,0,17],[3,0,"24_SPRITE_HOLLOW","ENEMY_GUARD_IDLE_WEST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,17,0,0,"24_SPRITE_HOLLOW","35_SPRITE_HOLLOW_ITEM",0,17,0,0,"24_SPRITE_HOLLOW",0,0,15,0,0,"24_SPRITE_HOLLOW","23_SPRITE_HOLLOW",0,15,0,0,"24_SPRITE_HOLLOW",0,0,15],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,17,0,0,0,0,0,17,0,0,0,0,"26_SPRITE_HOLLOW",17,0,0,0,0,0,17,0,0,0,0,0,15],[1,0,0,0,0,0,0,1,5,1,0,0,0,1,7,1,0,0,0,1,11,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,15,0,0,0,0,0,15,0,0,0,0,0,17,0,0,0,0,0,15,0,0,0,0,0,17],[3,0,0,0,0,1,3,1,3,3,1,"11_ID1211_START",1,1,3,1,1,1,3,3,11,1,1,1,1,1,3,1,1,"1_ID1229_START",1,1,3,3,1,0,0,0,1,17,15,15,27,15,17,15,17,15,27,15,17,15,17,15,27,15,15,17,15,15,27,15,15,15],[1,1,0,0,1,1,0,0,0,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",0,0,3,0,0,0,1,0,0,0,"42_SPRITE_HOLLOW_ITEM",0,1,0,0,0,0,0,3,0,0,0,0,15,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9],[0,5,0,0,5,5,"34_SPRITE_HOLLOW_ITEM",0,0,0,0,"11_ID1211_END",11,"38_SPRITE_HOLLOW_ITEM","2_SPRITE","24_SPRITE_HOLLOW",0,0,27,0,"24_SPRITE_HOLLOW",0,27,0,0,"24_SPRITE_HOLLOW","2_SPRITE",0,11,"1_ID1229_END",0,0,0,"34_SPRITE_HOLLOW_ITEM",5,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15],[1,1,0,0,1,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,0,0,1,1,"38_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_EAST",0,0,0,1,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_EAST","38_SPRITE_HOLLOW_ITEM",3,1,0,0,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",1,0,0,0,0,27,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,9],[3,0,0,0,0,1,1,1,3,3,3,3,1,1,1,3,3,1,1,1,27,1,1,1,1,3,1,1,1,1,1,1,3,1,1,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,0,0,0,15],[1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,17,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13],[1,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,27,0,0,"24_SPRITE_HOLLOW",0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,"24_SPRITE_HOLLOW",0,0,27,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,17,17,15,27,15,17,17,15,17,27,15,17,15,15,15,27,15,17,15,15,15,27,15,17,15],[1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,17,0,0,0,0,0,15,0,"23_SPRITE_HOLLOW",0,0,0,15,0,0,0,0,0,15,0,0,0,0,0,15],[3,1,"1_ID42_START",1,3,1,3,3,1,3,1,3,1,1,3,1,3,3,1,0,0,0,1,1,3,1,3,1,1,1,1,1,3,3,3,3,1,3,3,15,0,0,0,0,0,17,0,0,0,0,0,17,0,0,"35_SPRITE_HOLLOW_ITEM",0,0,17,0,0,0,0,0,17],[0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,"41_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,1,"39_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,1,0,0,15,0,0,"24_SPRITE_HOLLOW",0,0,15,"35_SPRITE_HOLLOW_ITEM",0,"24_SPRITE_HOLLOW",0,0,15,0,0,"24_SPRITE_HOLLOW","23_SPRITE_HOLLOW",0,15,0,"ENEMY_GUARD_IDLE_EAST","24_SPRITE_HOLLOW",0,0,15],[0,1,"1_ID42_END",0,0,0,0,0,0,"34_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,"39_SPRITE_HOLLOW_ITEM",11,0,0,0,0,0,11,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,"42_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,0,1,"15_ID239_END",0,"15_ID239_START","26_SPRITE_HOLLOW",0,"2_SPRITE",0,0,15,0,0,"2_SPRITE",0,0,17,"35_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_EAST","2_SPRITE",0,0,17,0,0,"2_SPRITE","26_SPRITE_HOLLOW",0,15],[0,1,1,0,0,0,0,0,"34_SPRITE_HOLLOW_ITEM",0,"34_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","1_ID112_START",0,"1_ID112_END",1,1,1,0,0,"START_POS",0,0,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,17,0,0,0,0,0,17,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",0,"ENEMY_GUARD_IDLE_EAST",0,17,0,0,0,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",17],[0,0,1,1,1,3,3,1,3,3,3,3,3,1,1,1,0,1,1,1,33,1,3,1,1,3,1,1,1,3,3,1,1,3,3,1,3,3,1,17,15,17,17,15,15,15,15,17,17,17,17,17,17,17,17,15,15,15,15,15,15,15,15,17]]},27:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var n=i(673),o=function(){function t(t){var e=t.emitter,i=t.frameSet,o=t.initialFrameIdx,r=void 0===o?0:o,a=t.isLoopAnimation,s=void 0!==a&&a,_=t.renderFunction,E=void 0===_?function(){}:_,c=t.onAnimationEnd,u=void 0===c?function(){}:c,h=t.onAnimationStart,l=void 0===h?function(){}:h,T=t.onFrameChange,I=void 0===T?function(){}:T;this._frameSet=i,this._currentFrameIdx=r,this._derivedRenderFunction=E,this._isLoopAnimation=s,this._onAnimationEnd=u,this._onAnimationStart=l,this._onFrameChange=I,this._timeout=new n.Timeout(e,this.playAnimation.bind(this)),s&&this.currentFrame.duration!==1/0&&this._timeout.set(this.currentFrame.duration)}return Object.defineProperty(t.prototype,"onAnimationEnd",{set:function(t){this._onAnimationEnd=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAnimationStart",{set:function(t){this._onAnimationStart=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFrameChange",{set:function(t){this._onFrameChange=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrameIdx",{get:function(){return this._currentFrameIdx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._frameSet[this._currentFrameIdx]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentlyInTimeout",{get:function(){return!this._timeout.isExpired},enumerable:!1,configurable:!0}),t.prototype.playAnimation=function(){this._currentFrameIdx===this._frameSet.length-1?(this._timeout.reset(),this._currentFrameIdx=0,this._onAnimationEnd(),this._isLoopAnimation&&this.currentFrame.duration!==1/0&&this._timeout.set(this.currentFrame.duration)):(0===this._currentFrameIdx&&this._onAnimationStart(),this._currentFrameIdx+=1,this.currentFrame.duration!==1/0&&this._timeout.set(this.currentFrame.duration)),this._onFrameChange(this._currentFrameIdx)},t.prototype.updateFrameSet=function(t){this._frameSet=t,this._currentFrameIdx=0,this._timeout.reset(),this._isLoopAnimation&&this.currentFrame.duration!==1/0&&this._timeout.set(this.currentFrame.duration)},t.prototype.setActiveFrameIdx=function(t){if(t>this._frameSet.length-1)throw Error("Frame ".concat(t," is out of bounds"));this._currentFrameIdx=t,this._timeout.reset(),this._isLoopAnimation&&this.currentFrame.duration!==1/0&&this._timeout.set(this.currentFrame.duration)},t.prototype.render=function(){this._derivedRenderFunction(this._frameSet[this._currentFrameIdx].data)},t}();e.Animation=o},673:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Timeout=void 0;var i=function(){function t(t,e){void 0===e&&(e=null),this._timeoutTime=null,this._onTimeoutExpire=e,this._emitter=t,this.registerEvents()}return t.prototype.registerEvents=function(){this._emitter.on("frameUpdate",this.update.bind(this))},t.prototype.update=function(){this._timeoutTime&&(new Date).getTime()>this._timeoutTime&&(this._timeoutTime=null,this._onTimeoutExpire&&this._onTimeoutExpire())},Object.defineProperty(t.prototype,"onTimeoutExpire",{set:function(t){this._onTimeoutExpire=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpired",{get:function(){return!this._timeoutTime},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._timeoutTime=null},t.prototype.set=function(t){this._timeoutTime=(new Date).getTime()+t},t}();e.Timeout=i},819:function(t,e,i){var n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.GameMap=void 0;var o=i(673),r=i(525),a=i(380),s=i(882),_=i(559),E=i(314),c=i(4),u=function(){function t(t,e){this._emitter=t;var i=(0,_.parseMap)(t,e),n=i.obstacles,o=i.doors,a=i.enemies,s=i.map,E=i.startPosition;this._map=s,this._obstacles=n,this._doors=o,this._enemies=a,this._currentlyMovingObstacles=[],this._wolfMatrixPosition={x:Math.floor(E.x/r.TILE_SIZE),y:Math.floor(E.y/r.TILE_SIZE)},this.startPosition=E,this.registerEvents()}return Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enemies",{get:function(){return this._enemies},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"obstacles",{get:function(){return this._obstacles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doors",{get:function(){return this._doors},enumerable:!1,configurable:!0}),t.prototype.registerEvents=function(){this._emitter.on("wolfMatrixPositionChange",this.updateWolfMatrixPosition.bind(this)),this._emitter.on("frameUpdate",this.update.bind(this)),this._emitter.on("enemyDie",this.spawnAmmoOnDeadEnemy.bind(this))},t.prototype.updateWolfMatrixPosition=function(t){this._wolfMatrixPosition=t},t.prototype.spawnAmmoOnDeadEnemy=function(t){this._map[t.currentMatrixPosition.y][t.currentMatrixPosition.x]=new E.ItemObstacle({position:{x1:t.currentMatrixPosition.x*r.TILE_SIZE,y1:t.currentMatrixPosition.y*r.TILE_SIZE,x2:t.currentMatrixPosition.x*r.TILE_SIZE+r.TILE_SIZE,y2:t.currentMatrixPosition.y*r.TILE_SIZE+r.TILE_SIZE},hasCollision:!1,texture:(0,a.getImageWithSource)("src/assets/sprites/items/".concat(r.AMMO_ID,".png")),rawValue:"34_SPRITE_HOLLOW_ITEM",purpose:r.ITEMS_PURPOSES[r.AMMO_ID]})},t.prototype.interactWithObstacle=function(t){((0,c.isDoor)(t)||(0,c.isWall)(t))&&t.isMovable&&(this._currentlyMovingObstacles.includes(t)||this._currentlyMovingObstacles.push(t))},t.prototype.getNonGridObstaclesInView=function(t){var e=t.position,i=t.angle,o=t.camera.fov,r=(0,s.getRangeOfView)(i,o,e);return n(n(n([],this._currentlyMovingObstacles,!0),this._doors,!0),this._enemies,!0).reduce((function(i,n){if((0,c.isEnemy)(n))return i.push(n.getPreparedSprite(t.position,t.angle)),i;if(!(0,c.isWall)(n))return i.push(n),i;var o=n.position;return e.x<=o.x1&&i.push(n.wallSides.LEFT),e.x>=o.x2&&i.push(n.wallSides.RIGHT),e.y<=o.y1&&i.push(n.wallSides.TOP),e.y>=o.y2&&i.push(n.wallSides.BOTTOM),i}),[]).filter((function(e){var i=!!t.camera.getViewAngleIntersection(e.position),n=e.position,o=n.x1,a=n.y1,_=n.x2,E=n.y2;return i||(0,s.getIsVertexInTheTriangle)({x:o,y:a},r)||(0,s.getIsVertexInTheTriangle)({x:_,y:E},r)}))},t.prototype.update=function(){var t=this;this._currentlyMovingObstacles.forEach((function(e){var i=e.move();i&&(0,c.isDoor)(e)&&!e.isInStartPosition&&(e.closeTimeout=new o.Timeout(t._emitter,(function(){t._wolfMatrixPosition.x>=e.endPositionMatrixCoordinates.x-1&&t._wolfMatrixPosition.x<=e.endPositionMatrixCoordinates.x+1&&t._wolfMatrixPosition.y>=e.endPositionMatrixCoordinates.y-1&&t._wolfMatrixPosition.y<=e.endPositionMatrixCoordinates.y+1?e.closeTimeout.set(r.DOOR_TIMEOUT):(e.closeTimeout=null,e.hasCollision=!0,t._currentlyMovingObstacles.push(e))})),e.closeTimeout.set(r.DOOR_TIMEOUT),e.hasCollision=!1),(0,c.isWall)(e)&&i&&(t._map[e.endPositionMatrixCoordinates.y][e.endPositionMatrixCoordinates.x]=e,t._map[e.matrixCoordinates.y][e.matrixCoordinates.x]=null),i&&(t._currentlyMovingObstacles=t._currentlyMovingObstacles.filter((function(t){return t!==e})))}))},t}();e.GameMap=u},111:function(t,e,i){var n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var o=i(155),r=i(766),a=i(968),s=i(525),_=i(145),E=i(882),c=i(819),u=i(4),h=function(){function t(t){this._canvas=t.canvas,this._ctx=t.canvas.getContext("2d"),this._screenData=t.screenData,this._emitter=t.emitter,this._gameMap=new c.GameMap(this._emitter,t.map),this._hud=new o.Hud({ctx:this._ctx,emitter:this._emitter,screenData:this._screenData,initialWeapon:"PISTOL"}),this._wolf=new a.Wolf({angle:0,ammo:50,emitter:this._emitter,currentWeapon:"PISTOL",health:50,level:0,lives:3,maxHealth:100,position:this._gameMap.startPosition,score:0,screenData:this._screenData,weapons:["KNIFE","PISTOL","MACHINE_GUN"],rawValue:"START_POS",resolutionScale:t.resolutionScale,fov:t.fov,parsedMap:this._gameMap.map}),this._minimap=new r.Minimap({ctx:this._ctx,obstacles:this._gameMap.obstacles,rowsLength:this._gameMap.map.length}),this.resize(this._screenData),this.registerEvents()}return t.prototype.registerEvents=function(){this._emitter.on("wolfAttack",this.handleWolfAttack.bind(this)),this._emitter.on("wolfInteract",this.handleWolfInteract.bind(this)),this._emitter.on("resize",this.resize.bind(this))},t.prototype.resize=function(t){var e=t.width,i=t.height;this._canvas.width=e,this._canvas.height=i,this._screenData.height=i,this._screenData.width=e},t.prototype.handleWolfAttack=function(){var t=this,e=(0,E.getRangeOfView)(this._wolf.angle,s.WOLF_ATTACK_FOV,this._wolf.position),i=this._gameMap.enemies.filter((function(i){if("DIE"===i.currentState)return!1;var n=i.getPreparedSprite(t._wolf.position,t._wolf.angle).position,o=!!t._wolf.camera.getViewAngleIntersection(n);return!(!(0,E.getIsVertexInTheTriangle)(i.position,e)&&!o)&&!(i.castToPosition(t._wolf.position).distance>s.WEAPONS[t._wolf.currentWeapon].maxDistance)&&i.castToPosition(t._wolf.position).isVisible})).sort((function(e,i){var n=e.castToPosition(t._wolf.position),o=i.castToPosition(t._wolf.position);return n.distance-o.distance}))[0];if(i){var n=s.WEAPONS[this._wolf.currentWeapon],o=i.castToPosition(this._wolf.position).distance,r=(n.maxDistance-o)/n.maxDistance,a=(0,E.clamp)(n.maxDamage*r,n.minDamage,n.maxDamage);i.hit(a)}},t.prototype.handleWolfInteract=function(){for(var t=null,e=null,i=0;i<this._gameMap.obstacles.length;i++){var n=this._gameMap.obstacles[i];if(((0,u.isDoor)(n)||(0,u.isWall)(n))&&n.isMovable){var o=this._wolf.camera.getViewAngleIntersection(n.position),r=Math.sqrt(Math.pow(this._wolf.position.x-n.position.x1,2)+Math.pow(this._wolf.position.y-n.position.y1,2));o&&r<=2*s.TILE_SIZE&&(t=i,e=n)}}null!==t&&e&&this._gameMap.interactWithObstacle(e)},t.prototype.render=function(){this._ctx.imageSmoothingEnabled=!1,this._ctx.beginPath(),this._ctx.clearRect(0,0,this._screenData.width,this._screenData.height),this._ctx.closePath(),this._ctx.fillStyle="#383838",this._ctx.fillRect(0,0,this._screenData.width,Math.ceil(this._screenData.height/2));for(var t=this._wolf.camera.getIntersections(this._gameMap.map,this._gameMap.getNonGridObstaclesInView(this._wolf)),e=n([],t,!0).sort((function(t,e){return e.distance===t.distance?e.distance*(1e5*e.layer)-t.distance*(1e5*t.layer):e.distance-t.distance})),i={startTextureOffsetX:0,startIndex:0,width:0,isInitial:!0,rays:[]},o=0;o<e.length;o++){var r=e[o],a=r.obstacle,E=r.index,c=(0,u.isSprite)(a),h=e[o+1],l=(0,_.getTextureOffset)(r),T=h&&(0,_.getTextureOffset)(h);i.isInitial&&(i.rays.push(r),i.width=1,i.startIndex=r.index,i.startTextureOffsetX=l,i.isInitial=!1);var I=(null==h?void 0:h.layer)===r.layer,S=(null==h?void 0:h.obstacle)===r.obstacle,O=(null==h?void 0:h.index)===E||(null==h?void 0:h.index)===E+1,p=c||(null==h?void 0:h.distance)===r.distance,f=(null==h?void 0:h.obstacle.texture)===a.texture;if(c&&S&&I||!c&&O&&p&&f&&(c||T===l))i.rays.push(h),i.width+=1;else{var L=!(0,u.isWall)(a)&&!(0,u.isDoor)(a)||a.intersectionType===s.INTERSECTION_TYPES.HORIZONTAL,d=s.TILE_SIZE/r.distance*(Math.PI/this._wolf.camera.fov)*this._screenData.height/1.75,P=L&&((0,u.isWall)(a)||(0,u.isDoor)(a))?a.textureDark:a.texture,m=c?s.TEXTURE_SIZE-i.startTextureOffsetX-1:l,R=c?Math.abs(i.startTextureOffsetX-l):1,y=s.TEXTURE_SIZE,M=i.startIndex/this._wolf.camera.resolutionScale,A=this._screenData.height/2-d/2,g=i.width/this._wolf.camera.resolutionScale;i.rays=[],i.width=0,i.startIndex=0,i.isInitial=!0,this._ctx.drawImage(P,m,0,R,y,M,A,g,d)}}this._hud.render({currentWeapon:this._wolf.currentWeapon,ammo:this._wolf.ammo,lives:this._wolf.lives,score:this._wolf.score,level:this._wolf.level,health:this._wolf.health}),this._minimap.render(this._wolf.position,this._gameMap.enemies)},t}();e.Scene=h},379:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Guard=void 0;var a=i(745),s=i(770),_=function(t){function e(e){return t.call(this,r(r({},e),{currentWeapon:"PISTOL",health:100,maxHealth:100,frameSet:(0,s.getEnemyFrameSet)("guard")}))||this}return o(e,t),e}(a.Enemy);e.Guard=_},968:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Wolf=void 0;var r=i(306),a=i(556),s=i(525),_=i(4),E=function(t){function e(e){var i=t.call(this,e)||this;return i._ammo=e.ammo,i._score=e.score,i._lives=e.lives,i._level=e.level,i._weapons=e.weapons,i._emitter=e.emitter,i._camera=new a.Camera({screenData:e.screenData,resolutionScale:e.resolutionScale,fov:e.fov,position:e.position,emitter:e.emitter}),i.registerEvents(),i}return o(e,t),e.prototype.registerEvents=function(){window.addEventListener("mousedown",this.handleMouseEvent.bind(this)),window.addEventListener("mouseup",this.handleMouseEvent.bind(this)),window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this)),this._emitter.on("frameUpdate",this.update.bind(this))},Object.defineProperty(e.prototype,"angle",{get:function(){return this.camera.angle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ammo",{get:function(){return this._ammo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lives",{get:function(){return this._lives},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"health",{get:function(){return this._health},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentWeapon",{get:function(){return this._currentWeapon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canAttack",{get:function(){return this._attackTimeout.isExpired&&(this._ammo>0||0===s.WEAPONS[this._currentWeapon].ammoPerAttack)},enumerable:!1,configurable:!0}),e.prototype.handleKeyDown=function(t){"1"===t.key?this.changeWeapon("KNIFE"):"2"===t.key?this.changeWeapon("PISTOL"):"3"===t.key&&this.changeWeapon("MACHINE_GUN"),32===t.keyCode&&this._emitter.emit("wolfInteract",void 0),87===t.keyCode?this._verticalSpeed=s.ACTOR_SPEED:83===t.keyCode?this._verticalSpeed=-s.ACTOR_SPEED:68===t.keyCode?this._horizontalSpeed=s.ACTOR_SPEED:65===t.keyCode&&(this._horizontalSpeed=-s.ACTOR_SPEED)},e.prototype.handleMouseEvent=function(t){1===t.buttons&&(this._isAttacking=!0),0===t.buttons&&(this._isAttacking=!1)},e.prototype.handleKeyUp=function(t){87===t.keyCode&&this._verticalSpeed>0||83===t.keyCode&&this._verticalSpeed<0?this._verticalSpeed=0:(68===t.keyCode&&this._horizontalSpeed>0||65===t.keyCode&&this._horizontalSpeed<0)&&(this._horizontalSpeed=0)},e.prototype.changeWeapon=function(t){this._weapons.includes(t)&&(this._currentWeapon=t,this._emitter.emit("wolfWeaponChange",this._currentWeapon),this._attackTimeout.set(100),this._attackTimeout.onTimeoutExpire=null)},e.prototype.attack=function(){var t=this;if(this.canAttack){var e=s.WEAPONS[this._currentWeapon];this._attackTimeout.set(e.frameDuration*e.attackFrameIdx),this._attackTimeout.onTimeoutExpire=function(){t._ammo-=s.WEAPONS[t._currentWeapon].ammoPerAttack,t._attackTimeout.set(e.frameDuration*(e.frameSet.length-e.attackFrameIdx)),t._attackTimeout.onTimeoutExpire=null},this._emitter.emit("wolfAttack",void 0)}},e.prototype.move=function(){var t=this;if(0!==this._horizontalSpeed||0!==this._verticalSpeed){var e={x:this._position.x,y:this._position.y},i=Math.sin(this._camera.angle)*this._verticalSpeed*TIME_SCALE,n=Math.cos(this._camera.angle)*this._verticalSpeed*TIME_SCALE,o=i+Math.sin(this._camera.angle+Math.PI/2)*this._horizontalSpeed*TIME_SCALE,r=n+Math.cos(this._camera.angle+Math.PI/2)*this._horizontalSpeed*TIME_SCALE;e.x+=o>=0?Math.min(o,s.ACTOR_SPEED*TIME_SCALE):Math.max(o,-s.ACTOR_SPEED*TIME_SCALE),e.y+=r>=0?Math.min(r,s.ACTOR_SPEED*TIME_SCALE):Math.max(r,-s.ACTOR_SPEED*TIME_SCALE);var a=function(i){if(i&&(i.hasCollision||(0,_.isItem)(i))){var n=!1,o=(0,_.isWall)(i)&&i.isInFinalPosition?i.endPositionMatrixCoordinates:i.matrixCoordinates,r={x1:o.x*s.TILE_SIZE,y1:o.y*s.TILE_SIZE,x2:o.x*s.TILE_SIZE+s.TILE_SIZE,y2:o.y*s.TILE_SIZE+s.TILE_SIZE};(0,_.isDoor)(i)&&("VERTICAL"===i.intersectionType&&(r.x1-=s.TILE_SIZE/2,r.x2+=s.TILE_SIZE/2),"HORIZONTAL"===i.intersectionType&&(r.y1-=s.TILE_SIZE/2,r.y2+=s.TILE_SIZE/2));var a=r.x1-.3*s.TILE_SIZE,E=r.y1-.3*s.TILE_SIZE,c=r.x2+.3*s.TILE_SIZE,u=r.y2+.3*s.TILE_SIZE;if(e.x>=a&&e.x<=c&&e.y>=E&&e.y<=u&&(i.hasCollision&&(t._position.x>=a&&t._position.x<=c&&(e.y=t._position.y),t._position.y>=E&&t._position.y<=u&&(e.x=t._position.x)),n=!0),n&&(0,_.isItem)(i)){var h=i.purpose;switch(h.affects){case"ammo":if(100===t._ammo)return;t._ammo+=h.value,t._ammo>100&&(t._ammo=100);break;case"health":if(t._health===t._maxHealth)return;t._health+=h.value,t._health>t._maxHealth&&(t._health=t._maxHealth);break;case"lives":t._lives+=h.value;break;case"score":t._score+=h.value;break;case"weapons":t._weapons.push(h.value)}t._emitter.emit("wolfBoostPickup",void 0),t._parsedMap[i.matrixCoordinates.y][i.matrixCoordinates.x]=null}}},E=this.currentMatrixPosition;a((this._parsedMap[E.y-1]||[])[E.x-1]),a((this._parsedMap[E.y-1]||[])[E.x]),a((this._parsedMap[E.y-1]||[])[E.x+1]),a((this._parsedMap[E.y]||[])[E.x-1]),a((this._parsedMap[E.y]||[])[E.x+1]),a((this._parsedMap[E.y+1]||[])[E.x-1]),a((this._parsedMap[E.y+1]||[])[E.x]),a((this._parsedMap[E.y+1]||[])[E.x+1]),this._position=e,this._emitter.emit("wolfPositionChange",this._position),this._emitter.emit("wolfMatrixPositionChange",this.currentMatrixPosition)}},e.prototype.update=function(){this.move(),this._isAttacking&&this.attack()},e}(r.Actor);e.Wolf=E},306:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;var n=i(673),o=i(525),r=function(){function t(t){this._currentWeapon=t.currentWeapon,this._health=t.health,this._maxHealth=t.maxHealth,this._position=t.position,this._angle=t.angle,this._rawValue=t.rawValue,this._parsedMap=t.parsedMap,this._emitter=t.emitter,this._attackTimeout=new n.Timeout(t.emitter),this._isAttacking=!1,this._horizontalSpeed=0,this._verticalSpeed=0}return Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMatrixPosition",{get:function(){return{x:Math.floor(this._position.x/o.TILE_SIZE),y:Math.floor(this._position.y/o.TILE_SIZE)}},enumerable:!1,configurable:!0}),t}();e.Actor=r},745:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Enemy=void 0;var r=i(306),a=i(592),s=i(625),_=i(27),E=i(525),c=i(882),u=i(4),h=(0,c.toRadians)(45),l=h/2,T=function(t){function e(e){var i=t.call(this,e)||this;i.isEnemy=!0,i._currentState=e.initialAction,i._frameSet=e.frameSet,i._currentSide="FRONT",i._type=e.type;var n=(0,u.isNonDirectedFrameSetByAction)(i._currentState)?i._frameSet[i._currentState]:i._frameSet[i._currentState][i._currentSide];return i._animationController=new _.Animation({frameSet:n,isLoopAnimation:!0,emitter:i._emitter}),"DIE"===i._currentState&&i._animationController.setActiveFrameIdx(n.length-1),i._sprite=new a.SpriteObstacle({hasCollision:!1,position:{x1:i.currentMatrixPosition.x*E.TILE_SIZE,y1:i.currentMatrixPosition.y*E.TILE_SIZE,x2:i.currentMatrixPosition.x*E.TILE_SIZE+E.TILE_SIZE,y2:i.currentMatrixPosition.y*E.TILE_SIZE+E.TILE_SIZE},rawValue:i._rawValue,texture:i._animationController.currentFrame.data}),i.registerEvents(),i}return o(e,t),e.prototype.registerEvents=function(){this._emitter.on("wolfPositionChange",this.checkForWolfInView.bind(this))},Object.defineProperty(e.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),e.prototype.castToPosition=function(t){var e=(0,c.getDistanceBetweenVertexes)(this._position,t),i=(0,c.getAngleBetweenVertexes)(this._position,t);i<=0&&(i=2*Math.PI+i);var n=new s.Ray({initialPosition:this._position,angle:i}).castDDA(this._parsedMap,i).filter((function(t){return(0,u.isWall)(t.obstacle)||(0,u.isDoor)(t.obstacle)&&t.obstacle.isInStartPosition})).sort((function(t,e){return t.distance-e.distance}))[0];return{isVisible:!n||n.distance>e,distance:e,angle:i}},e.prototype.hit=function(t){var e=this;this._health-=t,this._health<=0?(this.changeState("DIE"),this._emitter.emit("enemyDie",this),this._animationController.onAnimationEnd=function(){}):(this.changeState("TAKING_DAMAGE"),this._animationController.onAnimationEnd=function(){e.changeState("IDLE")})},e.prototype.changeState=function(t){this._currentState=t,(0,u.isNonDirectedFrameSetByAction)(t)?this._animationController.updateFrameSet(this._frameSet[t]):this._animationController.updateFrameSet(this._frameSet[t][this._currentSide])},e.prototype.checkForWolfInView=function(t){if("DIE"!==this._currentState){var e=this.castToPosition(t),i=(0,c.getRangeOfView)(this._angle,E.ENEMY_FOV,this._position);(0,c.getIsVertexInTheTriangle)(t,i)&&(e.distance>E.ENEMY_VIEW_DISTANCE||e.isVisible&&(this._angle=e.angle))}},e.prototype.getPreparedSprite=function(t,e){if((0,u.isDirectedFrameSetByAction)(this._currentState)){var i=(0,c.getAngleBetweenVertexes)(this._position,t)-this._angle,n=this._currentSide;if(i<=0&&(i=2*Math.PI+i),i<=l||i>l+7*h?n="FRONT":i<l+h?n="FRONT_LEFT":i<l+2*h?n="LEFT":i<l+3*h?n="BACK_RIGHT":i<l+4*h?n="BACK":i<l+5*h?n="BACK_LEFT":i<l+6*h?n="RIGHT":i<l+7*h&&(n="FRONT_RIGHT"),n!==this._currentSide){this._currentSide=n;var o=this._animationController.currentFrameIdx;this._animationController.updateFrameSet(this._frameSet[this._currentState][this._currentSide]),this._animationController.setActiveFrameIdx(o)}}return this._sprite.texture=this._animationController.currentFrame.data,this._sprite.position={x1:this.currentMatrixPosition.x*E.TILE_SIZE,y1:this.currentMatrixPosition.y*E.TILE_SIZE,x2:this.currentMatrixPosition.x*E.TILE_SIZE+E.TILE_SIZE,y2:this.currentMatrixPosition.y*E.TILE_SIZE+E.TILE_SIZE},this._sprite.rotatePerpendicularlyToView(e),this._sprite},e}(r.Actor);e.Enemy=T},311:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.DoorObstacle=void 0;var r=i(525),a=function(t){function e(e){var i=t.call(this,e)||this;return i._textureDark=e.textureDark,i.isVertical=e.isVertical,i.isDoor=!0,i.closeTimeout=e.closeTimeout,i.shouldReverseTexture=!e.isVertical,i.intersectionType=e.isVertical?r.INTERSECTION_TYPES.VERTICAL:r.INTERSECTION_TYPES.HORIZONTAL,i}return o(e,t),Object.defineProperty(e.prototype,"textureDark",{get:function(){return this._textureDark},enumerable:!1,configurable:!0}),e}(i(890).DynamicObstacle);e.DoorObstacle=a},314:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ItemObstacle=void 0;var r=function(t){function e(e){var i=t.call(this,e)||this;return i.isItem=!0,i.purpose=e.purpose,i}return o(e,t),e}(i(592).SpriteObstacle);e.ItemObstacle=r},592:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteObstacle=void 0;var r=i(525),a=function(t){function e(e){var i=t.call(this,e)||this;return i.isSprite=!0,i}return o(e,t),e.prototype.rotatePerpendicularlyToView=function(t){var e=this._position.x1,i=this._position.y1,n=(this._position.x2+e)/2,o=(this._position.y2+i)/2,a=-t;return this.position={x1:n+r.TILE_SIZE/2*Math.cos(a),y1:o+r.TILE_SIZE/2*Math.sin(a),x2:n-r.TILE_SIZE/2*Math.cos(a),y2:o-r.TILE_SIZE/2*Math.sin(a)},this},e}(i(873).StaticObstacle);e.SpriteObstacle=a},308:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.WallObstacle=void 0;var a=i(525),s=i(380),_=function(t){function e(e){var i=t.call(this,e)||this;return i.intersectionType=a.INTERSECTION_TYPES.HORIZONTAL,i.shouldReverseTexture=!1,i.isWall=!0,i._textureDark=e.textureDark,i._neighborIsDoorMap=e.neighborIsDoorMap,i._wallSides={TOP:i.getWallSide(a.OBSTACLE_SIDES.TOP,i._neighborIsDoorMap.TOP),RIGHT:i.getWallSide(a.OBSTACLE_SIDES.RIGHT,i._neighborIsDoorMap.RIGHT),BOTTOM:i.getWallSide(a.OBSTACLE_SIDES.BOTTOM,i._neighborIsDoorMap.BOTTOM),LEFT:i.getWallSide(a.OBSTACLE_SIDES.LEFT,i._neighborIsDoorMap.LEFT)},i}return o(e,t),Object.defineProperty(e.prototype,"wallSides",{get:function(){return this._wallSides},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textureDark",{get:function(){return this._textureDark},set:function(t){this._textureDark=t},enumerable:!1,configurable:!0}),e.prototype.move=function(){var e=t.prototype.move.call(this);return this._wallSides={TOP:this.getWallSide(a.OBSTACLE_SIDES.TOP,this._neighborIsDoorMap.TOP),RIGHT:this.getWallSide(a.OBSTACLE_SIDES.RIGHT,this._neighborIsDoorMap.RIGHT),BOTTOM:this.getWallSide(a.OBSTACLE_SIDES.BOTTOM,this._neighborIsDoorMap.BOTTOM),LEFT:this.getWallSide(a.OBSTACLE_SIDES.LEFT,this._neighborIsDoorMap.LEFT)},e},e.prototype.getWallSide=function(t,e){var i=t===a.OBSTACLE_SIDES.TOP||t===a.OBSTACLE_SIDES.BOTTOM,n={x1:this.position.x1+(t===a.OBSTACLE_SIDES.RIGHT?a.TILE_SIZE:0),y1:this.position.y1+(t===a.OBSTACLE_SIDES.BOTTOM?a.TILE_SIZE:0),x2:this.position.x2-(t===a.OBSTACLE_SIDES.LEFT?a.TILE_SIZE:0),y2:this.position.y2-(t===a.OBSTACLE_SIDES.TOP?a.TILE_SIZE:0)},o=this._texture,_=this._textureDark;return e&&(o=(0,s.getImageWithSource)("src/assets/textures/".concat(a.DOOR_SIDE_WALL_TEXTURE_ID,".png")),_=(0,s.getImageWithSource)("src/assets/textures/".concat(a.DOOR_SIDE_WALL_TEXTURE_DARK_ID,".png"))),r(r({},this),{position:n,intersectionType:i?a.INTERSECTION_TYPES.VERTICAL:a.INTERSECTION_TYPES.HORIZONTAL,shouldReverseTexture:!e&&(t===a.OBSTACLE_SIDES.LEFT||t===a.OBSTACLE_SIDES.BOTTOM),texture:o,textureDark:_})},e}(i(890).DynamicObstacle);e.WallObstacle=_},890:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicObstacle=void 0;var r=i(525),a=function(t){function e(e){var i=t.call(this,e)||this;return i._initialPosition=e.initialPosition,i._endPosition=e.endPosition,i._isMoving=e.isMoving,i._isInFinalPosition=e.isInFinalPosition,i._isInStartPosition=e.isInStartPosition,i._endPositionMatrixCoordinates={x:Math.floor(i._endPosition.x1/r.TILE_SIZE),y:Math.floor(i._endPosition.y1/r.TILE_SIZE)},i.isMovable=e.isMovable,i}return o(e,t),Object.defineProperty(e.prototype,"endPositionMatrixCoordinates",{get:function(){return this._endPositionMatrixCoordinates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialPosition",{get:function(){return this._initialPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMoving",{get:function(){return this._isMoving},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInFinalPosition",{get:function(){return this._isInFinalPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInStartPosition",{get:function(){return this._isInStartPosition},enumerable:!1,configurable:!0}),e.getPositionChange=function(t,e){return t>e?-r.OBSTACLES_MOVE_SPEED:t<e?r.OBSTACLES_MOVE_SPEED:0},e.prototype.move=function(){if(!this.isMovable)return!0;this._isMoving=!0;var t=this._isInStartPosition?this._endPosition:this._initialPosition;return this._position={x1:this._position.x1+e.getPositionChange(this._position.x1,t.x1)*TIME_SCALE,y1:this._position.y1+e.getPositionChange(this._position.y1,t.y1)*TIME_SCALE,x2:this._position.x2+e.getPositionChange(this._position.x2,t.x2)*TIME_SCALE,y2:this._position.y2+e.getPositionChange(this._position.y2,t.y2)*TIME_SCALE},Math.round(this._position.x1*r.TILE_SIZE)/r.TILE_SIZE===t.x1&&Math.round(this._position.y1*r.TILE_SIZE)/r.TILE_SIZE===t.y1&&Math.round(this._position.x2*r.TILE_SIZE)/r.TILE_SIZE===t.x2&&Math.round(this._position.y2*r.TILE_SIZE)/r.TILE_SIZE===t.y2&&(this._position=t,this._isMoving=!1,this._isInStartPosition=!this._isInStartPosition,this._isInFinalPosition=!this._isInFinalPosition,!0)},e}(i(873).StaticObstacle);e.DynamicObstacle=a},873:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StaticObstacle=void 0;var n=i(525),o=function(){function t(t){this._position=t.position,this._texture=t.texture,this._matrixCoordinates={x:Math.floor(this._position.x1/n.TILE_SIZE),y:Math.floor(this._position.y1/n.TILE_SIZE)},this.hasCollision=t.hasCollision,this.rawValue=t.rawValue}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._matrixCoordinates={x:Math.floor(this._position.x1/n.TILE_SIZE),y:Math.floor(this._position.y1/n.TILE_SIZE)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matrixCoordinates",{get:function(){return this._matrixCoordinates},enumerable:!1,configurable:!0}),t}();e.StaticObstacle=o},519:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{_(n.next(t))}catch(t){r(t)}}function s(t){try{_(n.throw(t))}catch(t){r(t)}}function _(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}_((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.canvas=void 0;var r=i(111),a=i(250),s=i(525),_=i(300),E=i(882);e.canvas=document.getElementById("canvas");var c=new a.EventEmitter;window.onload=function(){return n(this,void 0,void 0,(function(){function t(){c.emit("resize",{width:window.innerWidth,height:window.innerHeight})}function i(t){t.target&&(p=s.RESOLUTIONS_SCALE_VALUES[Number(t.target.value)],c.emit("resolutionScaleChange",p))}function n(t){if(t.target){var e=Number(t.target.value);f=(0,E.toRadians)(e),I.innerText=t.target.value,c.emit("fovChange",f)}}function a(t){"Escape"===t.key&&(O=!0,h.style.display="flex")}function u(){O&&(O=!1,h.style.display="none")}var h,l,T,I,S,O,p,f,L,d,P,m,R,y;return o(this,(function(o){return h=document.getElementById("menu-container"),l=document.getElementById("resolution-scale"),T=document.getElementById("fov"),I=document.getElementById("fovValue"),S=document.getElementById("continue-button"),O=!1,p=s.DEFAULT_RESOLUTION_SCALE,f=s.DEFAULT_FOV,T.value=String(s.DEFAULT_FOV_DEGREES),I.innerText=String(s.DEFAULT_FOV_DEGREES),l.value=String(s.RESOLUTIONS_SCALE_VALUES.indexOf(s.DEFAULT_RESOLUTION_SCALE)),L={height:window.innerHeight,width:window.innerWidth},d=new r.Scene({canvas:e.canvas,map:_.map,screenData:L,emitter:c,fov:f,resolutionScale:p}),P=document.getElementById("fps"),m=0,R=0,y=0,function t(e){O||c.emit("frameUpdate",void 0),d.render(),m=R;var i=(R=e)-m;y+=(i-y)/20,TIME_SCALE=Math.min(Math.round(i/s.DEFAULT_FRAME_DURATION*100)/100,1),requestAnimationFrame(t)}(0),setInterval((function(){P.innerHTML="".concat((1e3/y).toFixed(1)," fps")}),200),S.onclick=u,l.oninput=i,T.oninput=n,window.onkeydown=a,window.addEventListener("resize",t),e.canvas.onclick=function(){e.canvas.requestPointerLock()},[2]}))}))}},556:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var n=i(573),o=i(882),r=i(625),a=i(519),s=i(4),_=function(){function t(t){this._emitter=t.emitter,this._angle=(0,o.toRadians)(180),this._resolutionScale=t.resolutionScale,this._fov=t.fov,this._screenData=t.screenData,this._position=t.position,this._rays=[],this.changeRaysAmount(),this.registerEvents()}return t.prototype.registerEvents=function(){a.canvas.addEventListener("mousemove",this.rotate.bind(this)),this._emitter.on("resize",this.handleResize.bind(this)),this._emitter.on("resolutionScaleChange",this.handleResolutionScaleChange.bind(this)),this._emitter.on("fovChange",this.handleFovChange.bind(this)),this._emitter.on("wolfPositionChange",this.updatePosition.bind(this))},Object.defineProperty(t.prototype,"resolutionScale",{get:function(){return this._resolutionScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._fov},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!1,configurable:!0}),t.prototype.handleResize=function(t){this._screenData=t,this.changeRaysAmount()},t.prototype.handleResolutionScaleChange=function(t){this._resolutionScale=t,this.changeRaysAmount()},t.prototype.handleFovChange=function(t){this._fov=t},t.prototype.updatePosition=function(t){for(var e=0;e<this._rays.length;e++)this._rays[e].move(t);this._position=t},t.prototype.getViewAngleIntersection=function(t){var e=(0,o.getVertexByPositionAndAngle)(this._position,this._angle);return(0,o.getIntersectionVertexWithPlane)({x1:this._position.x,y1:this._position.y,x2:e.x,y2:e.y},t)},t.prototype.getIntersections=function(t,e){for(var i=this,o=[],r=function(r){var _=[],E=a._rays[r].cast(e,a._angle),c=a._rays[r].castDDA(t,a._angle),u=c.reduce((function(t,e){return(!t&&(0,s.isWall)(e.obstacle)||t&&(0,s.isWall)(e.obstacle)&&e.distance<t.distance)&&(t=e),t}),null);u&&(E=E.filter((function(t){return t.distance<u.distance}))),E.forEach((function(t){var e=t.obstacle,i=t.intersectionVertex,o=t.distance,a=(0,s.isSprite)(e)?4:(0,n.getRelativeChunkMultiplier)(o),E=Math.round(o*a)/a,c=_.reduce((function(t,e){return e.distance===E&&(t+=1),t}),0);_.push({intersectionVertex:i,obstacle:e,distance:Math.round(o*a)/a,index:r,layer:c})})),c.forEach((function(t){var e=t.obstacle,o=t.intersectionVertex,a=t.distance,E=e.position,c=(0,s.isSprite)(e)?4:(0,n.getRelativeChunkMultiplier)(a),u=o,h=Math.round(a*c)/c,l=null;if((0,s.isSprite)(e)||(0,s.isItem)(e)){l=e.rotatePerpendicularlyToView(i._angle);var T=i._rays[r].cast([l],i._angle).sort((function(t,e){return t.distance-e.distance}))[0];if(!T)return;h=Math.round(T.distance*c)/c,u=T.intersectionVertex}else(0,s.isWall)(e)&&(u.y!==E.y1&&u.x===E.x1&&(l=e.wallSides.LEFT),u.y!==E.y1&&u.x===E.x2&&(l=e.wallSides.RIGHT),u.y===E.y1&&u.x!==E.x1&&(l=e.wallSides.TOP),u.y===E.y2&&u.x!==E.x1&&(l=e.wallSides.BOTTOM));if(l){var I=_.reduce((function(t,e){return e.distance===h&&(t+=1),t}),0);_.push({obstacle:l,distance:h,index:r,intersectionVertex:u,layer:I})}})),o.push.apply(o,_)},a=this,_=0;_<this._rays.length;_++)r(_);return o},t.prototype.changeRaysAmount=function(){this._rays=[];for(var t=this._screenData.width*this._resolutionScale,e=Math.tan(this._fov/2),i=e/(t/2),n=0;n<t;n++){var o=this._angle+Math.atan(i*n-e);o<0&&(o+=2*Math.PI),o>2*Math.PI&&(o-=2*Math.PI),this._rays.push(new r.Ray({angle:o,initialPosition:this._position}))}},t.prototype.rotate=function(t){this._angle+=(0,o.toRadians)(t.movementX/3),this._angle=this._angle%(2*Math.PI),this._angle<0&&(this._angle+=2*Math.PI);for(var e=Math.tan(this._fov/2),i=e/(10*Math.floor(this._rays.length/10)/2),n=0;n<this._rays.length;n++){var r=this._angle+Math.atan(i*n-e);r<0&&(r+=2*Math.PI),r>2*Math.PI&&(r-=2*Math.PI),this._rays[n].changeAngle(r)}},t}();e.Camera=_},250:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;var i=function(){function t(){this.events={}}return t.prototype.on=function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},t.prototype.once=function(t,e){var i=this,n=function(o){i.off(t,n),e(o)};this.on(t,n)},t.prototype.off=function(t,e){if(this.events[t]){var i=this.events[t].indexOf(e);i>=0&&this.events[t].splice(i,1)}},t.prototype.emit=function(t,e){this.events[t]&&this.events[t].forEach((function(t){return t(e)}))},t}();e.EventEmitter=i},625:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Ray=void 0;var n=i(525),o=i(882),r=i(4),a=function(){function t(t){this._angle=t.angle,this._position={x1:0,y1:0,x2:0,y2:0},this.move(t.initialPosition)}return Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!1,configurable:!0}),t.prototype.changeAngle=function(t){this._angle=t,this.move({x:this._position.x1,y:this._position.y1})},t.prototype.move=function(t){this._position={x1:t.x,y1:t.y,x2:t.x+Math.sin(this._angle)*n.RAY_LENGTH,y2:t.y+Math.cos(this._angle)*n.RAY_LENGTH}},t.prototype.castDDA=function(t,e){var i=[],a=(0,o.unitVector)({x:this._position.x2-this._position.x1,y:this._position.y2-this._position.y1}),s=this._position.x1/n.TILE_SIZE,_=this._position.y1/n.TILE_SIZE,E={x:Math.floor(this._position.x1/n.TILE_SIZE),y:Math.floor(this._position.y1/n.TILE_SIZE)},c=Math.abs(1/a.x),u=Math.abs(1/a.y),h=0,l=0,T=1,I=1;a.x<0?(T=-1,h=(s-E.x)*c):h=(E.x+1-s)*c,a.y<0?(I=-1,l=(_-E.y)*u):l=(E.y+1-_)*u;for(var S="x",O=0;O<n.RAY_LENGTH/n.TILE_SIZE;)if(h<l?(E.x+=T,O=h,h+=c,S="x"):(E.y+=I,O=l,l+=u,S="y"),E.x>=0&&E.x<64&&E.y>=0&&E.y<64&&t[E.y]&&t[E.y][E.x]){var p=t[E.y][E.x];if((0,r.isDynamicObstacle)(p)&&p.isMoving)continue;var f={x:s*n.TILE_SIZE+a.x*O*n.TILE_SIZE,y:_*n.TILE_SIZE+a.y*O*n.TILE_SIZE};f[S]=Math.round(f[S]);var L=(0,o.getDistanceWithoutFishEyeEffect)(O*n.TILE_SIZE,e,this._angle);if((L>n.TILE_SIZE/5||!(0,r.isSprite)(p))&&i.push({obstacle:p,distance:L,intersectionVertex:f}),(0,r.isSprite)(p)||(0,r.isDoor)(p))continue;return i}return i},t.prototype.cast=function(t,e){for(var i=[],a=0,s=t;a<s.length;a++){var _=s[a],E=(0,o.getIntersectionVertexWithPlane)(this._position,_.position);if(E){var c=(0,o.getDistanceBetweenVertexes)({x:this._position.x1,y:this._position.y1},E),u=(0,o.getDistanceWithoutFishEyeEffect)(c,e,this._angle);(u>n.TILE_SIZE/5||!(0,r.isSprite)(_))&&i.push({intersectionVertex:E,distance:u,obstacle:_})}}return i},t}();e.Ray=a},4:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isDirectedFrameSetByAction=e.isNonDirectedFrameSetByAction=e.isDynamicObstacle=e.isEnemy=e.isDoor=e.isWall=e.isItem=e.isSprite=void 0;var n=i(770);e.isSprite=function(t){return!!t&&!!t.isSprite},e.isItem=function(t){return!!t&&!!t.isItem},e.isWall=function(t){return!!t&&!!t.isWall},e.isDoor=function(t){return!!t&&!!t.isDoor},e.isEnemy=function(t){return!!t&&!!t.isEnemy},e.isDynamicObstacle=function(t){return(0,e.isDoor)(t)||(0,e.isWall)(t)},e.isNonDirectedFrameSetByAction=function(t){return n.NON_DIRECTED_FRAME_SETS_BY_ACTION.includes(t)},e.isDirectedFrameSetByAction=function(t){return n.DIRECTED_FRAME_SETS_BY_ACTION.includes(t)}},770:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.generatePostEffectFrameSet=e.fillPortraitFrameSet=e.getEnemyFrameSet=e.fillDirection=e.fillWeaponFrameSet=e.DIRECTED_FRAME_SETS_BY_ACTION=e.NON_DIRECTED_FRAME_SETS_BY_ACTION=void 0;var n=i(380),o=["FRONT","FRONT_RIGHT","RIGHT","BACK_LEFT","BACK","BACK_RIGHT","LEFT","FRONT_LEFT"];function r(){return o.reduce((function(t,e){return t[e]=[],t}),{})}e.NON_DIRECTED_FRAME_SETS_BY_ACTION=["ATTACK","DIE","TAKING_DAMAGE"],e.DIRECTED_FRAME_SETS_BY_ACTION=["IDLE","WANDER","CHASE"],e.fillWeaponFrameSet=function(t,e){for(var i=[],o=0;o<5;o++)i.push((0,n.getImageWithSource)("src/assets/weapons/".concat(t.toLowerCase(),"/").concat(t.toLowerCase(),"_frame_").concat(o,".png")));return i.map((function(t){return{data:t,duration:e}}))},e.fillDirection=r,e.getEnemyFrameSet=function(t){var e={IDLE:r(),WANDER:r(),CHASE:r(),ATTACK:[],DIE:[],TAKING_DAMAGE:[]};e.TAKING_DAMAGE.push({data:(0,n.getImageWithSource)("src/assets/enemies/".concat(t,"/taking_damage/0.png")),duration:150});for(var i=0,a=o;i<a.length;i++){var s=a[i];e.IDLE[s].push({data:(0,n.getImageWithSource)("src/assets/enemies/".concat(t,"/idle/").concat(s.toLowerCase(),"_0.png")),duration:1/0})}for(var _=0;_<=2;_++)e.ATTACK.push({data:(0,n.getImageWithSource)("src/assets/enemies/".concat(t,"/attack/").concat(_,".png")),duration:150});for(_=0;_<=4;_++)e.DIE.push({data:(0,n.getImageWithSource)("src/assets/enemies/".concat(t,"/die/").concat(_,".png")),duration:4===_?1/0:100});return e},e.fillPortraitFrameSet=function(t){for(var e=[],i=0;i<3;i++)e.push((0,n.getImageWithSource)("src/assets/hud/portrait/".concat(t.toLowerCase(),"/frame_").concat(i,".png")));return[{data:e[0],duration:2e3},{data:e[1],duration:750},{data:e[2],duration:750},{data:e[1],duration:750},{data:e[0],duration:1500},{data:e[1],duration:1500},{data:e[2],duration:200},{data:e[1],duration:500},{data:e[2],duration:500},{data:e[1],duration:500}]},e.generatePostEffectFrameSet=function(t){return[{data:{color:"rgba(".concat(t.join(","),", 0)")},duration:1e4},{data:{color:"rgba(".concat(t.join(","),", 0.25)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.2)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.15)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.1)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.05)")},duration:40}]}},380:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getImageWithSource=void 0;var i={};e.getImageWithSource=function(t){if(i[t])return i[t];var e=new Image;return e.src=t,i[t]=e,e}},573:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRelativeChunkMultiplier=void 0;var n=i(525);e.getRelativeChunkMultiplier=function(t){return t<n.TILE_SIZE/2?24:t<3*n.TILE_SIZE?12:t<6*n.TILE_SIZE?2:1}},145:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getTextureOffset=void 0;var n=i(525),o=i(4);e.getTextureOffset=function(t){var e=t.obstacle,i=e.position,r=((0,o.isWall)(e)||(0,o.isDoor)(e))&&e.intersectionType===n.INTERSECTION_TYPES.VERTICAL,a=!1;((0,o.isSprite)(e)||(0,o.isItem)(e))&&Math.abs(i.x1-i.x2)>Math.abs(i.y1-i.y2)&&(a=!0);var s=((0,o.isWall)(e)||(0,o.isDoor)(e))&&e.shouldReverseTexture?{x:i.x2,y:i.y2}:{x:i.x1,y:i.y1},_=r||a?s.x-t.intersectionVertex.x:s.y-t.intersectionVertex.y,E=r||a?Math.abs(i.x1-i.x2):Math.abs(i.y1-i.y2),c=Math.abs(_)/E;return Math.floor(c*n.TEXTURE_SIZE)}},882:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getIntersectionVertexWithPlane=e.getDistanceWithoutFishEyeEffect=e.unitVector=e.vectorSize=e.getIsVertexInTheTriangle=e.getRangeOfView=e.getDistanceBetweenVertexes=e.getVertexByPositionAndAngle=e.getAngleBetweenVertexes=e.getAreaSize=e.hasEqualPosition=e.clamp=e.toDegrees=e.toRadians=void 0;var n=i(525);function o(t,e,i,n,o,r){return Math.abs((t*(n-r)+i*(r-e)+o*(e-n))/2)}function r(t,e){return{x:t.x+n.RAY_LENGTH*Math.sin(e),y:t.y+n.RAY_LENGTH*Math.cos(e)}}function a(t){var e=t.x,i=t.y;return Math.sqrt(e*e+i*i)}e.toRadians=function(t){return t*Math.PI/180},e.toDegrees=function(t){return 180/Math.PI*t},e.clamp=function(t,e,i){return Math.max(e,Math.min(t,i))},e.hasEqualPosition=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2},e.getAreaSize=o,e.getAngleBetweenVertexes=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(i,n)},e.getVertexByPositionAndAngle=r,e.getDistanceBetweenVertexes=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getRangeOfView=function(t,e,i){var n=t-e,o=t+e,a=r(i,t),s=r(a,n),_=r(a,o);return{x1:i.x,y1:i.y,x2:s.x,y2:s.y,x3:_.x,y3:_.y}},e.getIsVertexInTheTriangle=function(t,e){var i=t.x,n=t.y,r=e.x1,a=e.y1,s=e.x2,_=e.y2,E=e.x3,c=e.y3,u=o(r,a,s,_,E,c),h=o(i,n,s,_,E,c),l=o(r,a,i,n,E,c),T=o(r,a,s,_,i,n);return Math.round(u)===Math.round(h+l+T)},e.vectorSize=a,e.unitVector=function(t){var e=t.x,i=t.y,n=a({x:e,y:i});return{x:e/n,y:i/n}},e.getDistanceWithoutFishEyeEffect=function(t,e,i){return t*Math.cos(e-i)},e.getIntersectionVertexWithPlane=function(t,e){var i=t.x1,n=t.x2,o=t.y1,r=t.y2,a=e.x1,s=e.y1,_=e.x2,E=e.y2;if(i===n&&o===r||a===_&&s===E)return null;var c=(E-s)*(n-i)-(_-a)*(r-o);if(0===c)return null;var u=((_-a)*(o-s)-(E-s)*(i-a))/c,h=((n-i)*(o-s)-(r-o)*(i-a))/c;return u<0||u>1||h<0||h>1?null:{x:i+u*(n-i),y:o+u*(r-o)}}},559:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseMap=void 0;var n=i(379),o=i(311),r=i(314),a=i(592),s=i(308),_=i(525),E=i(882),c=i(380);e.parseMap=function(t,e){for(var i,u,h,l,T=[],I=[],S=[],O=[],p={x:0,y:0},f={},L=0;L<e.length;L++){T.push([]);for(var d=0;d<e[L].length;d++)if((m=e[L][d])&&"string"==typeof m){var P=m.split("_");"END"===P[2]&&(f[P[1]]={x1:d*_.TILE_SIZE,y1:L*_.TILE_SIZE,x2:d*_.TILE_SIZE+_.TILE_SIZE,y2:L*_.TILE_SIZE+_.TILE_SIZE})}}for(L=0;L<e.length;L++)for(d=0;d<e[L].length;d++){var m;if(m=e[L][d]){if(m){if("START_POS"===m){p={x:d*_.TILE_SIZE+_.TILE_SIZE/2,y:L*_.TILE_SIZE+_.TILE_SIZE/2},T[L].push(null);continue}var R="number"==typeof m?[]:m.split("_"),y="number"!=typeof m?Number(R[0]):m;if(R&&R.includes("END")){T[L].push(null);continue}var M=d%63==0||L%63==0,A=R.includes("ENEMY"),g=R.includes("ITEM"),D=R.includes("SPRITE")||!1,x=!D&&R.includes("START"),v=!D&&_.DOOR_IDS.includes(y),W=!D&&(v||x)&&!M,H=!(A||g||D||v),b=!R.includes("HOLLOW"),F=null;g&&(F=_.ITEMS_PURPOSES[y]);var C=!(!e[L][d-1]||!e[L][d+1]),N={x1:d*_.TILE_SIZE+(!C&&v?.5*_.TILE_SIZE:0),y1:L*_.TILE_SIZE+(C&&v?.5*_.TILE_SIZE:0),x2:d*_.TILE_SIZE+(!C&&v?.5*_.TILE_SIZE:_.TILE_SIZE),y2:L*_.TILE_SIZE+(C&&v?.5*_.TILE_SIZE:_.TILE_SIZE)},w=x&&R?f[R[1]]:{x1:C?N.x1+_.TILE_SIZE:N.x1,y1:C?N.y1:N.y1-_.TILE_SIZE,x2:C?N.x2+_.TILE_SIZE:N.x2,y2:C?N.y2:N.y2-_.TILE_SIZE};if(A){var U=R[1].toLowerCase(),G=R[2],Z=R[3];if("guard"===U){var V=new n.Guard({type:U,parsedMap:T,emitter:t,rawValue:m,initialAction:G,angle:(0,E.toRadians)(_.ENEMY_FACING_DIRECTION_MAP[Z]),position:{x:(N.x1+N.x2)/2,y:(N.y1+N.y2)/2}});O.push(V),T[L].push(null)}}else if(H){var Y=new s.WallObstacle({neighborIsDoorMap:{TOP:!!(null===(i=e[L-1])||void 0===i?void 0:i[d])&&_.DOOR_IDS.includes(e[L-1][d]),RIGHT:!!(null===(u=e[L])||void 0===u?void 0:u[d+1])&&_.DOOR_IDS.includes(e[L][d+1]),BOTTOM:!!(null===(h=e[L+1])||void 0===h?void 0:h[d])&&_.DOOR_IDS.includes(e[L+1][d]),LEFT:!!(null===(l=e[L])||void 0===l?void 0:l[d-1])&&_.DOOR_IDS.includes(e[L][d-1])},initialPosition:N,position:N,endPosition:w,isInFinalPosition:!1,isInStartPosition:!0,isMovable:W,isMoving:!1,hasCollision:b,texture:(0,c.getImageWithSource)("src/assets/textures/".concat(y,".png")),textureDark:(0,c.getImageWithSource)("src/assets/textures/".concat(y+1,".png")),rawValue:m});T[L].push(Y),I.push(Y)}else if(D&&!g){var j=new a.SpriteObstacle({position:N,hasCollision:b,texture:(0,c.getImageWithSource)("src/assets/sprites/".concat(b?"static":"hollow","/").concat(y,".png")),rawValue:m});T[L].push(j),I.push(j)}else if(g){var B=new r.ItemObstacle({position:N,hasCollision:b,texture:(0,c.getImageWithSource)("src/assets/sprites/items/".concat(y,".png")),rawValue:m,purpose:F});T[L].push(B),I.push(B)}else if(v){var k=new o.DoorObstacle({initialPosition:N,position:N,endPosition:w,isInFinalPosition:!1,isInStartPosition:!0,isMovable:W,isMoving:!1,isVertical:C,hasCollision:b,texture:(0,c.getImageWithSource)("src/assets/textures/".concat(y,".png")),textureDark:(0,c.getImageWithSource)("src/assets/textures/".concat(y+1,".png")),rawValue:m,closeTimeout:null});T[L].push(k),I.push(k),S.push(k)}}}else T[L].push(null)}return{map:T,obstacles:I,startPosition:p,doors:S,enemies:O}}},155:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hud=void 0;var n=i(27),o=i(525),r=i(798),a=i(770),s=function(){function t(t){this._ctx=t.ctx,this._screenData=t.screenData,this._currentFrameSet=r.ACTOR_PORTRAIT_FRAME_SETS.HEALTHY,this._emitter=t.emitter,this._scale=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH,this._width=Math.round(this._screenData.width*o.HUD_WIDTH_COEFFICIENT),this._height=Math.round(r.HUD_PANEL.HEIGHT*this._scale),this._offsetX=this._screenData.width/2-this._width/2,this._offsetY=this._screenData.height-this._height,this._portraitAnimation=new n.Animation({renderFunction:this.renderPortrait.bind(this),frameSet:this._currentFrameSet,initialFrameIdx:0,isLoopAnimation:!0,emitter:this._emitter}),this._weaponAnimation=new n.Animation({renderFunction:this.renderWeapon.bind(this),initialFrameIdx:0,isLoopAnimation:!1,frameSet:o.WEAPONS[t.initialWeapon].frameSet,emitter:this._emitter}),this._postEffectAnimation=new n.Animation({renderFunction:this.renderPostEffect.bind(this),initialFrameIdx:0,isLoopAnimation:!1,frameSet:(0,a.generatePostEffectFrameSet)([255,255,0]),emitter:this._emitter}),this.registerEvents()}return t.getHealthFrameSet=function(t){return t>85?r.ACTOR_PORTRAIT_FRAME_SETS.HEALTHY:t>75?r.ACTOR_PORTRAIT_FRAME_SETS.JUST_A_SCRATCH:t>50?r.ACTOR_PORTRAIT_FRAME_SETS.MINOR_DAMAGE:t>35?r.ACTOR_PORTRAIT_FRAME_SETS.MODERATE_DAMAGE:t>20?r.ACTOR_PORTRAIT_FRAME_SETS.SEVERE_DAMAGE:t>5?r.ACTOR_PORTRAIT_FRAME_SETS.SUFFERING:t>0?r.ACTOR_PORTRAIT_FRAME_SETS.NEAR_DEATH:r.ACTOR_PORTRAIT_FRAME_SETS.DEAD},t.prototype.registerEvents=function(){this._emitter.on("wolfWeaponChange",this.onWeaponChange.bind(this)),this._emitter.on("wolfBoostPickup",this.onBoostPickup.bind(this)),this._emitter.on("wolfAttack",this.onAttack.bind(this))},t.prototype.renderPostEffect=function(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(0,0,this._screenData.width,this._screenData.height)},t.prototype.renderWeapon=function(t){var e=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH*r.HUD_PANEL.HEIGHT,i=this._screenData.height-e,n=this._screenData.width/2-i/2,a=this._screenData.height-i-e;this._ctx.drawImage(t,0,0,o.TEXTURE_SIZE,o.TEXTURE_SIZE,n,a,i,i)},t.prototype.renderPortrait=function(t){var e=this._offsetX+Math.round(r.HUD_PANEL.PORTRAIT_X_OFFSET*this._scale),i=this._offsetY+Math.round(r.HUD_PANEL.PORTRAIT_Y_OFFSET*this._scale);this._ctx.drawImage(t,0,0,r.PORTRAIT_WIDTH,r.PORTRAIT_HEIGHT,e,i,Math.round(r.PORTRAIT_WIDTH*this._scale),Math.round(r.PORTRAIT_HEIGHT*this._scale))},t.prototype.renderText=function(t,e){for(var i=String(t),n=Math.ceil(i.length*r.FONT_SYMBOL_WIDTH*this._scale),o=0;o<i.length;o++){var a=Number(i[o])*r.FONT_SYMBOL_WIDTH,s=o*r.FONT_SYMBOL_WIDTH,_=this._offsetX+e+Math.ceil(s*this._scale)-n/2,E=this._offsetY+Math.ceil(r.HUD_PANEL.INFO_Y_OFFSET*this._scale);this._ctx.drawImage(r.FONT_IMAGE,a,0,r.FONT_SYMBOL_WIDTH,r.FONT_SYMBOL_HEIGHT,_,E,Math.ceil(r.FONT_SYMBOL_WIDTH*this._scale),Math.ceil(r.FONT_SYMBOL_HEIGHT*this._scale))}},t.prototype.onWeaponChange=function(t){this._weaponAnimation.updateFrameSet(o.WEAPONS[t].frameSet)},t.prototype.onBoostPickup=function(){this._postEffectAnimation.updateFrameSet((0,a.generatePostEffectFrameSet)([255,255,0])),this._postEffectAnimation.playAnimation()},t.prototype.onAttack=function(){this._weaponAnimation.setActiveFrameIdx(0),this._weaponAnimation.playAnimation()},t.prototype.render=function(e){var i=e.ammo,n=e.lives,a=e.score,s=e.health,_=e.currentWeapon,E=e.level,c=t.getHealthFrameSet(s);c!==this._currentFrameSet&&(this._currentFrameSet=c,this._portraitAnimation.updateFrameSet(this._currentFrameSet)),this._scale=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH,this._width=Math.round(this._screenData.width*o.HUD_WIDTH_COEFFICIENT),this._height=Math.round(r.HUD_PANEL.HEIGHT*this._scale),this._offsetX=this._screenData.width/2-this._width/2,this._offsetY=this._screenData.height-this._height,this._ctx.drawImage(r.HUD_PANEL.TEXTURE,0,0,r.HUD_PANEL.WIDTH,r.HUD_PANEL.HEIGHT,this._offsetX,this._offsetY,this._width,this._height),this._ctx.drawImage(o.WEAPONS[_].icon,0,0,r.WEAPON_ICON_WIDTH,r.WEAPON_ICON_HEIGHT,this._offsetX+Math.round(r.HUD_PANEL.WEAPON_X_OFFSET*this._scale),this._offsetY+Math.round(r.HUD_PANEL.WEAPON_Y_OFFSET*this._scale),Math.round(r.WEAPON_ICON_WIDTH*this._scale),Math.round(r.WEAPON_ICON_HEIGHT*this._scale)),this.renderText(E,r.HUD_PANEL.LEVEL_X_OFFSET*this._scale),this.renderText(a,r.HUD_PANEL.SCORE_X_OFFSET*this._scale),this.renderText(n,r.HUD_PANEL.LIVES_X_OFFSET*this._scale),this.renderText(s,r.HUD_PANEL.HEALTH_X_OFFSET*this._scale),this.renderText(i,r.HUD_PANEL.AMMO_X_OFFSET*this._scale),this._weaponAnimation.render(),this._postEffectAnimation.render(),this._portraitAnimation.render()},t}();e.Hud=s},766:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Minimap=void 0;var n=i(525),o=i(4),r=function(){function t(t){this._ctx=t.ctx,this._obstacles=t.obstacles,this._rowsLength=t.rowsLength}return t.prototype.render=function(t,e){for(var i=this._rowsLength*n.TILE_SIZE,r=0,a=this._obstacles;r<a.length;r++){var s=a[r];(0,o.isWall)(s)&&s.isMovable?this._ctx.fillStyle="orange":this._ctx.fillStyle="white",(0,o.isWall)(s)&&this._ctx.fillRect(s.initialPosition.x1*n.MAP_SCALE,(i-s.initialPosition.y1-n.TILE_SIZE)*n.MAP_SCALE,n.TILE_SIZE*n.MAP_SCALE,n.TILE_SIZE*n.MAP_SCALE)}for(var _=0,E=e;_<E.length;_++){var c=E[_];this._ctx.fillStyle="red";var u={x:c.position.x+n.TILE_SIZE/n.MAP_SCALE*Math.sin(c.angle),y:c.position.y+n.TILE_SIZE/n.MAP_SCALE*Math.cos(c.angle)};this._ctx.strokeStyle="orange",this._ctx.beginPath(),this._ctx.moveTo(c.position.x*n.MAP_SCALE,(i-c.position.y)*n.MAP_SCALE),this._ctx.lineTo(u.x*n.MAP_SCALE,(i-u.y)*n.MAP_SCALE),this._ctx.closePath(),this._ctx.stroke(),this._ctx.beginPath(),this._ctx.ellipse(c.position.x*n.MAP_SCALE,(i-c.position.y)*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,0,0,360),this._ctx.closePath(),this._ctx.fill()}this._ctx.fillStyle="blue",this._ctx.beginPath(),this._ctx.ellipse(t.x*n.MAP_SCALE,(i-t.y)*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,0,0,360),this._ctx.closePath(),this._ctx.fill()},t}();e.Minimap=r}},e={};!function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}(519)})();