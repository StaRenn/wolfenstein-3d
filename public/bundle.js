(()=>{"use strict";var t={525:(t,e,i)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.ENEMY_FACING_DIRECTION_MAP=e.NEIGHBOR_OFFSET=e.OBSTACLE_SIDES=e.INTERSECTION_TYPES=e.ITEMS_PURPOSES=e.WEAPONS=e.DEFAULT_RESOLUTION_SCALE=e.DEFAULT_FOV=e.DEFAULT_FOV_DEGREES=e.RESOLUTIONS_SCALE_VALUES=e.ACTOR_SPEED=e.OBSTACLES_MOVE_SPEED=e.DEFAULT_FRAME_DURATION=e.MAP_SCALE=e.HUD_WIDTH_COEFFICIENT=e.TEXTURE_SIZE=e.DOOR_SIDE_WALL_TEXTURE_DARK_ID=e.DOOR_SIDE_WALL_TEXTURE_ID=e.DOOR_IDS=e.DOOR_TIMEOUT=e.RAY_LENGTH=e.TILE_SIZE=void 0;var o=i(380),r=i(11),_=i(929);e.TILE_SIZE=10,e.RAY_LENGTH=64*e.TILE_SIZE,e.DOOR_TIMEOUT=4e3,e.DOOR_IDS=[27,28,33,34,35,36],e.DOOR_SIDE_WALL_TEXTURE_ID=30,e.DOOR_SIDE_WALL_TEXTURE_DARK_ID=29,e.TEXTURE_SIZE=64,e.HUD_WIDTH_COEFFICIENT=.6,e.MAP_SCALE=.6,e.DEFAULT_FRAME_DURATION=1e3/60,e.OBSTACLES_MOVE_SPEED=e.TILE_SIZE/(4*e.TILE_SIZE),e.ACTOR_SPEED=1,e.RESOLUTIONS_SCALE_VALUES=[.1,.25,.5,1],e.DEFAULT_FOV_DEGREES=90,e.DEFAULT_FOV=(0,_.toRadians)(e.DEFAULT_FOV_DEGREES),e.DEFAULT_RESOLUTION_SCALE=.5,window.TIME_SCALE=1,e.WEAPONS={KNIFE:{frameSet:(0,r.fillWeaponFrameSet)("KNIFE",50),maxDistance:10,damage:10,frameDuration:50,ammoPerAttack:0,shootFrameIdx:2,icon:(0,o.getImageWithSource)("src/assets/hud/knife.png")},PISTOL:{frameSet:(0,r.fillWeaponFrameSet)("PISTOL",65),maxDistance:70,damage:40,frameDuration:65,ammoPerAttack:1,shootFrameIdx:2,icon:(0,o.getImageWithSource)("src/assets/hud/pistol.png")},MACHINE_GUN:{frameSet:(0,r.fillWeaponFrameSet)("MACHINE_GUN",25),maxDistance:70,damage:20,frameDuration:25,ammoPerAttack:1,shootFrameIdx:2,icon:(0,o.getImageWithSource)("src/assets/hud/machine_gun.png")}},e.ITEMS_PURPOSES={34:{affects:"ammo",value:8},35:{affects:"health",value:10},39:{affects:"health",value:25},36:{affects:"score",value:100},37:{affects:"score",value:1},38:{affects:"score",value:500},42:{affects:"score",value:1e3},40:{affects:"weapons",value:"MACHINE_GUN"},41:{affects:"weapons",value:"MACHINE_GUN"}},e.INTERSECTION_TYPES={VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL"},e.OBSTACLE_SIDES={TOP:"TOP",BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT"},e.NEIGHBOR_OFFSET=((n={})[e.OBSTACLE_SIDES.TOP]=-1,n[e.OBSTACLE_SIDES.BOTTOM]=1,n[e.OBSTACLE_SIDES.LEFT]=-1,n[e.OBSTACLE_SIDES.RIGHT]=1,n),e.ENEMY_FACING_DIRECTION_MAP={WEST:0,NORTH:90,EAST:180,SOUTH:-90}},798:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ACTOR_PORTRAIT_FRAME_SETS=e.PORTRAIT_HEIGHT=e.PORTRAIT_WIDTH=e.WEAPON_ICON_HEIGHT=e.WEAPON_ICON_WIDTH=e.FONT_SYMBOL_HEIGHT=e.FONT_SYMBOL_WIDTH=e.FONT_IMAGE=e.HUD_PANEL=void 0;var n=i(380),o=i(11);e.HUD_PANEL={TEXTURE:(0,n.getImageWithSource)("src/assets/hud/panel.png"),WIDTH:400,HEIGHT:40,INFO_Y_OFFSET:16,WEAPON_Y_OFFSET:8,LEVEL_X_OFFSET:65,SCORE_X_OFFSET:111,LIVES_X_OFFSET:156,HEALTH_X_OFFSET:219,AMMO_X_OFFSET:262,WEAPON_X_OFFSET:296,PORTRAIT_X_OFFSET:174,PORTRAIT_Y_OFFSET:5},e.FONT_IMAGE=(0,n.getImageWithSource)("src/assets/hud/font.png"),e.FONT_SYMBOL_WIDTH=8,e.FONT_SYMBOL_HEIGHT=16,e.WEAPON_ICON_WIDTH=48,e.WEAPON_ICON_HEIGHT=24,e.PORTRAIT_WIDTH=30,e.PORTRAIT_HEIGHT=31,e.ACTOR_PORTRAIT_FRAME_SETS={HEALTHY:(0,o.fillPortraitFrameSet)("HEALTHY"),JUST_A_SCRATCH:(0,o.fillPortraitFrameSet)("JUST_A_SCRATCH"),MINOR_DAMAGE:(0,o.fillPortraitFrameSet)("MINOR_DAMAGE"),MODERATE_DAMAGE:(0,o.fillPortraitFrameSet)("MODERATE_DAMAGE"),SEVERE_DAMAGE:(0,o.fillPortraitFrameSet)("SEVERE_DAMAGE"),SUFFERING:(0,o.fillPortraitFrameSet)("SUFFERING"),NEAR_DEATH:(0,o.fillPortraitFrameSet)("NEAR_DEATH"),DEAD:[{data:(0,n.getImageWithSource)("src/assets/hud/portrait/dead/frame_0.png"),duration:1e4}]}},300:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0,e.map=[[0,0,1,1,1,1,1,"1_ID617_END",1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,1,1,1,3,1,1,1,1,3,1,1,1,1,3,3,1,1,3,1,1,3,3,1,1,3,3,3],[0,0,1,"39_SPRITE_HOLLOW_ITEM",0,0,0,0,"41_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3,1,1,1,3,3,"5_ID6037_END",1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,3],[37,37,1,3,"1_ID614_START",3,1,"1_ID617_START",3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",0,0,0,0,0,1,"39_SPRITE_HOLLOW_ITEM",0,"39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,0,0,3,0,"24_SPRITE_HOLLOW",0,27,0,"24_SPRITE_HOLLOW",0,0,0,"24_SPRITE_HOLLOW",0,5],[37,0,0,0,0,1,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","1_ID5810_END",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"35_SPRITE_HOLLOW_ITEM","11_SPRITE",0,0,"ENEMY_GUARD_IDLE_EAST","11_SPRITE",0,3,1,"5_ID6037_START",1,3,0,0,3,0,0,0,0,0,1,0,0,3,0,0,0,1,0,0,0,0,0,0,0,1],[37,0,37,1,"1_ID614_END",1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,1,1,3,1,0,0,0,3],[37,0,37,1,1,1,1,1,3,1,"1_ID5810_START",11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,27,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,27,0,0,0,1,"42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,0,0,0,1],[37,0,37,3,"34_SPRITE_HOLLOW_ITEM",0,0,0,"34_SPRITE_HOLLOW_ITEM",0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,"ENEMY_GUARD_IDLE_WEST",1,"ENEMY_GUARD_IDLE_WEST",0,0,1,"38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,"39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,"11_SPRITE","23_SPRITE_HOLLOW",0,0,"11_SPRITE",0,3,0,0,0,3,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,3,0,0,1,0,0,0,1,"42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,3,1,3,1,0,1,3,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,0,0,1,1,27,1,1,1,1,3,1,1,11,1,1,1,0,0,3,1,3,1,3,0,1,3,1,3,3,1,1,3,1,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,"42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,0,0,0,1],[37,0,37,0,1,1,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,1,0,0,0,0,0,0,1,3,0,1,0,"ENEMY_GUARD_IDLE_WEST",0,1,0,3,"1_SPRITE",0,0,0,0,0,0,3,0,0,0,3,1,1,1,1,1,27,1,1,3,3,1,1,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",1,0,0,0,1],[37,0,37,1,1,"1_SPRITE",0,0,0,0,0,3,"1_SPRITE",0,0,0,0,0,0,1,1,3,0,0,0,3,1,1,0,0,"22_SPRITE_HOLLOW",0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,3,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,0,0,1,0,0,0,3],[37,0,37,3,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,"ENEMY_GUARD_IDLE_NORTH",0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,"16_SPRITE",1,"1_SPRITE",0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,1,0,0,0,1,1,27,1,1,1,1,3,3,1,3,3,1,1,3,1,1,0,0,0,1,0,0,0,1],[37,0,37,3,0,"14_SPRITE",0,0,"ENEMY_GUARD_IDLE_EAST","13_SPRITE",0,3,0,"22_SPRITE_HOLLOW",0,0,0,"16_SPRITE","16_SPRITE",3,"1_SPRITE","1_SPRITE",0,0,0,3,3,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,1,1,0,0,0,0,0,"35_SPRITE_HOLLOW_ITEM",1,"1_SPRITE","1_SPRITE",0,0,"ENEMY_GUARD_IDLE_WEST",1,0,3,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,1,3,1,1,3,1,1,1,1,3,1,27,1,3,1,1,3,1,3,1,3,1,0,3,1,1,3,1,1,1,1,3,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[37,0,37,1,1,"12_SPRITE",1,"12_SPRITE",3,"12_SPRITE",1,1,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,11,0,"24_SPRITE_HOLLOW",0,"11_ID4543_START",0,"11_ID4543_END",1,1,3,3,1,3,1,3,3,1,1,1,1,3,0,0,0,1],[37,0,37,1,"12_SPRITE",0,0,0,0,0,0,1,0,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,"18_SPRITE",1,0,0,0,0,0,0,0,1,0,"6_SPRITE","ENEMY_GUARD_IDLE_NORTH",0,0,"6_SPRITE",0,1,0,0,0,1,0,0,0,1,1,1,31,5,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,"ENEMY_GUARD_IDLE_WEST",0,3,0,31,0,33,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,0,0,0,1],[37,0,37,1,"12_SPRITE","ENEMY_GUARD_IDLE_NORTH",0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,1,1,0,0,0,0,0,0,0,1,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,3,0,0,0,3,0,1,31,5,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,1,35,3,1,1,3,1,3,0,0,0,1,1,0,1,1,0,0,0,1,0,0,0,3],[37,0,37,1,"12_SPRITE",0,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,3,"16_SPRITE",0,0,0,0,0,"17_SPRITE",1,0,0,0,0,0,0,0,1,0,"6_SPRITE",0,0,0,"6_SPRITE",0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1],[37,0,37,1,1,0,0,0,0,0,0,1,"16_SPRITE","16_SPRITE",0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,1,0,"24_SPRITE_HOLLOW",0,1,0,0,0,1,0,0,0,1],[37,0,37,0,1,1,1,27,1,1,3,1,3,1,3,3,1,3,1,1,0,0,0,0,0,0,0,1,1,1,1,27,1,1,1,1,0,0,0,3,0,0,0,1,0,0,0,0,0,0,0,1,"38_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_WEST","38_SPRITE_HOLLOW_ITEM",1,0,0,0,3,0,0,0,3],[37,0,37,1,1,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,1,0,0,0,3,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,"2_SPRITE",0,0,0,"2_SPRITE",0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,1,0,0,0,3,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,"24_SPRITE_HOLLOW",0,1],[37,0,37,3,0,0,0,"25_SPRITE_HOLLOW",0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,"24_SPRITE_HOLLOW",0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[37,0,37,1,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,3,1,5,3,3,1,1,1,1,1,3,3,5,3,1,1,3,1,1,3,1,11,27,11,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,"2_SPRITE",0,0,0,"2_SPRITE",0,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,3,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,7,1,3,3,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[37,0,37,1,3,3,1,27,1,3,3,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,3,1,1,3,3,1,3,1,1,0,0,"ENEMY_GUARD_IDLE_EAST",1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,1,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,1,1,3,11,3,11,3,1,1,0,0,0,0,0,0,0,1,3,0,"38_SPRITE_HOLLOW_ITEM",0,"35_SPRITE_HOLLOW_ITEM",0,1,1,0,0,0,3,0,0,0,23,23,23,23,21,23,27,23,23,23,27,23,21,23,23,23,23,0,0,0,1],[37,0,37,3,0,"6_SPRITE",0,0,0,"6_SPRITE",0,1,0,"10_SPRITE",0,"10_SPRITE",0,"10_SPRITE",0,3,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,"ENEMY_GUARD_IDLE_WEST",0,3,0,"7_SPRITE",0,"38_SPRITE_HOLLOW_ITEM",0,"7_SPRITE",0,1,0,0,0,1,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,1],[37,0,37,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,"38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",0,"36_SPRITE_HOLLOW_ITEM",1,0,0,0,1,0,0,0,23,"38_SPRITE_HOLLOW_ITEM",0,"2_SPRITE",0,"2_SPRITE",0,"38_SPRITE_HOLLOW_ITEM",23,0,0,"2_SPRITE",0,"2_SPRITE",0,0,23,0,0,0,1],[37,0,37,3,0,"6_SPRITE",0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,0,27,0,0,0,"25_SPRITE_HOLLOW",0,0,"36_SPRITE_HOLLOW_ITEM",3,0,0,0,7,0,0,0,23,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,23,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,"ENEMY_GUARD_IDLE_WEST",0,23,0,0,0,7],[37,0,37,1,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,"35_SPRITE_HOLLOW_ITEM",0,1,"ENEMY_GUARD_IDLE_EAST",0,0,1,0,0,0,23,0,0,"2_SPRITE",0,"2_SPRITE",0,"ENEMY_GUARD_IDLE_WEST",23,"36_SPRITE_HOLLOW_ITEM",0,"2_SPRITE",0,"2_SPRITE",0,"34_SPRITE_HOLLOW_ITEM",23,0,0,0,1],[37,0,37,1,0,"6_SPRITE",0,"6_SPRITE",0,"6_SPRITE",0,1,0,"10_SPRITE",0,"10_SPRITE",0,"10_SPRITE",0,3,0,0,0,0,"ENEMY_GUARD_IDLE_WEST",0,0,3,"ENEMY_GUARD_IDLE_WEST","7_SPRITE",0,"42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","7_SPRITE",0,1,0,0,0,3,0,0,0,23,0,0,"42_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",0,0,23,"36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM",0,"42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",23,0,0,0,1],[37,0,37,3,0,0,0,0,0,0,0,1,1,3,11,1,11,1,1,3,0,0,0,0,0,0,0,1,1,"36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",3,3,0,0,0,1,0,0,0,23,23,23,23,19,23,23,23,23,23,23,23,19,23,23,23,23,0,0,0,3],[37,0,37,1,3,1,1,1,3,1,1,1,0,0,0,0,1,1,1,1,1,1,3,1,1,3,1,1,3,3,1,1,1,3,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,37,37,37,37,37,37,37,37,37,37,37,37,37,37,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,0,0,0,0,0,0,0,0,"38_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM",37,1,"ENEMY_GUARD_IDLE_NORTH",0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[37,"39_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,"36_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",37,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,3,1,1,3,1,1,3,1,3,5,1,1,3,1,1,3,1,3,3,5,1,1],[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,1,3,1,3,27,1,1,1,1,1,1,1,3,27,3,1,1,1,1,1,1,1,3,15,15,17,17,15,15,17,15,15,17,17,15,17,17,15,17,15,15,17,15,17,15,17,17,17],[1,1,3,1,1,1,3,1,0,3,1,11,3,1,0,3,1,3,1,0,0,0,1,5,3,3,5,3,0,0,0,3,3,1,0,3,1,1,1,15,0,0,0,0,0,17,0,0,0,0,"35_SPRITE_HOLLOW_ITEM",15,0,0,0,0,0,15,"23_SPRITE_HOLLOW",0,0,"35_SPRITE_HOLLOW_ITEM",0,15],[1,0,0,0,0,0,0,1,5,3,0,0,0,1,7,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,11,1,0,0,1,15,0,0,"2_SPRITE","26_SPRITE_HOLLOW",0,17,0,0,"2_SPRITE",0,0,17,0,0,"2_SPRITE",0,0,17,0,0,"2_SPRITE",0,0,17],[3,0,"24_SPRITE_HOLLOW","ENEMY_GUARD_IDLE_EAST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,17,0,0,"24_SPRITE_HOLLOW","35_SPRITE_HOLLOW_ITEM",0,17,0,0,"24_SPRITE_HOLLOW",0,0,15,0,0,"24_SPRITE_HOLLOW","23_SPRITE_HOLLOW",0,15,0,0,"24_SPRITE_HOLLOW",0,0,15],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,17,0,0,0,0,0,17,0,0,0,0,"26_SPRITE_HOLLOW",17,0,0,0,0,0,17,0,0,0,0,0,15],[1,0,0,0,0,0,0,1,5,1,0,0,0,1,7,1,0,0,0,1,11,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,15,0,0,0,0,0,15,0,0,0,0,0,17,0,0,0,0,0,15,0,0,0,0,0,17],[3,0,0,0,0,1,3,1,3,3,1,"11_ID1211_START",1,1,3,1,1,1,3,3,11,1,1,1,1,1,3,1,1,"1_ID1229_START",1,1,3,3,1,0,0,0,1,17,15,15,27,15,17,15,17,15,27,15,17,15,17,15,27,15,15,17,15,15,27,15,15,15],[1,1,0,0,1,1,0,0,0,0,0,0,1,"36_SPRITE_HOLLOW_ITEM","38_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",0,0,3,0,0,0,1,0,0,0,"42_SPRITE_HOLLOW_ITEM",0,1,0,0,0,0,0,3,0,0,0,0,15,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9],[0,5,0,0,5,5,"34_SPRITE_HOLLOW_ITEM",0,0,0,0,"11_ID1211_END",11,"38_SPRITE_HOLLOW_ITEM","2_SPRITE","24_SPRITE_HOLLOW",0,0,27,0,"24_SPRITE_HOLLOW",0,27,0,0,"24_SPRITE_HOLLOW","2_SPRITE",0,11,"1_ID1229_END",0,0,0,"34_SPRITE_HOLLOW_ITEM",5,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15],[1,1,0,0,1,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,0,0,1,1,"38_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_WEST",0,0,0,1,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_WEST","38_SPRITE_HOLLOW_ITEM",3,1,0,0,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",1,0,0,0,0,27,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,0,"24_SPRITE_HOLLOW",0,0,9],[3,0,0,0,0,1,1,1,3,3,3,3,1,1,1,3,3,1,1,1,27,1,1,1,1,3,1,1,1,1,1,1,3,1,1,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"ENEMY_GUARD_IDLE_EAST",0,0,0,0,0,0,0,15],[1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,"ENEMY_GUARD_IDLE_NORTH",0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,17,"ENEMY_GUARD_IDLE_WEST",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13],[1,0,"24_SPRITE_HOLLOW",0,0,0,0,0,0,0,0,0,27,0,0,"24_SPRITE_HOLLOW",0,0,0,0,"24_SPRITE_HOLLOW",0,0,0,0,"24_SPRITE_HOLLOW",0,0,27,0,0,0,0,0,0,0,"24_SPRITE_HOLLOW",0,1,17,17,15,27,15,17,17,15,17,27,15,17,15,15,15,27,15,17,15,15,15,27,15,17,15],[1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,17,0,0,0,0,0,15,0,"23_SPRITE_HOLLOW",0,0,0,15,0,0,0,0,0,15,0,0,0,0,0,15],[3,1,"1_ID42_START",1,3,1,3,3,1,3,1,3,1,1,3,1,3,3,1,0,0,0,1,1,3,1,3,1,1,1,1,1,3,3,3,3,1,3,3,15,0,0,0,0,0,17,0,0,0,0,0,17,0,0,"35_SPRITE_HOLLOW_ITEM",0,0,17,0,0,0,0,0,17],[0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,"41_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,1,"39_SPRITE_HOLLOW_ITEM","39_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,0,0,0,0,1,0,0,15,0,0,"24_SPRITE_HOLLOW",0,0,15,"35_SPRITE_HOLLOW_ITEM",0,"24_SPRITE_HOLLOW",0,0,15,0,0,"24_SPRITE_HOLLOW","23_SPRITE_HOLLOW",0,15,0,"ENEMY_GUARD_IDLE_WEST","24_SPRITE_HOLLOW",0,0,15],[0,1,"1_ID42_END",0,0,0,0,0,0,"34_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM",1,0,0,0,"39_SPRITE_HOLLOW_ITEM",11,0,0,0,0,0,11,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,"42_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,0,1,"15_ID239_END",0,"15_ID239_START","26_SPRITE_HOLLOW",0,"2_SPRITE",0,0,15,0,0,"2_SPRITE",0,0,17,"35_SPRITE_HOLLOW_ITEM","ENEMY_GUARD_IDLE_WEST","2_SPRITE",0,0,17,0,0,"2_SPRITE","26_SPRITE_HOLLOW",0,15],[0,1,1,0,0,0,0,0,"34_SPRITE_HOLLOW_ITEM",0,"34_SPRITE_HOLLOW_ITEM","42_SPRITE_HOLLOW_ITEM","1_ID112_START",0,"1_ID112_END",1,1,1,0,0,"START_POS",0,0,1,"34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM","34_SPRITE_HOLLOW_ITEM",0,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,17,0,0,0,0,0,17,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",0,"ENEMY_GUARD_IDLE_WEST",0,17,0,0,0,"35_SPRITE_HOLLOW_ITEM","35_SPRITE_HOLLOW_ITEM",17],[0,0,1,1,1,3,3,1,3,3,3,3,3,1,1,1,0,1,1,1,33,1,3,1,1,3,1,1,1,3,3,1,1,3,3,1,3,3,1,17,15,17,17,15,15,15,15,17,17,17,17,17,17,17,17,15,15,15,15,15,15,15,15,17]]},11:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.generatePostEffectFrameSet=e.fillPortraitFrameSet=e.getEnemyFrameSet=e.fillDirection=e.fillWeaponFrameSet=void 0;var n=i(380),o=["FRONT","FRONT_RIGHT","RIGHT","BACK_LEFT","BACK","BACK_RIGHT","LEFT","FRONT_LEFT"];function r(){return o.reduce((function(t,e){return t[e]=[],t}),{})}e.fillWeaponFrameSet=function(t,e){for(var i=[],o=0;o<5;o++)i.push((0,n.getImageWithSource)("src/assets/weapons/".concat(t.toLowerCase(),"/").concat(t.toLowerCase(),"_frame_").concat(o,".png")));return i.map((function(t){return{data:t,duration:e}}))},e.fillDirection=r,e.getEnemyFrameSet=function(t){for(var e={IDLE:r(),WALK:r(),RUN:r(),SHOOT:r(),DIE:r(),TAKING_DAMAGE:r()},i=0,_=o;i<_.length;i++){var a=_[i];e.IDLE[a].push({data:(0,n.getImageWithSource)("src/assets/enemies/".concat(t,"/idle/").concat(a.toLowerCase(),"_0.png")),duration:1/0})}return e},e.fillPortraitFrameSet=function(t){for(var e=[],i=0;i<3;i++)e.push((0,n.getImageWithSource)("src/assets/hud/portrait/".concat(t.toLowerCase(),"/frame_").concat(i,".png")));return[{data:e[0],duration:2e3},{data:e[1],duration:750},{data:e[2],duration:750},{data:e[1],duration:750},{data:e[0],duration:1500},{data:e[1],duration:1500},{data:e[2],duration:200},{data:e[1],duration:500},{data:e[2],duration:500},{data:e[1],duration:500}]},e.generatePostEffectFrameSet=function(t){return[{data:{color:"rgba(".concat(t.join(","),", 0)")},duration:1e4},{data:{color:"rgba(".concat(t.join(","),", 0.25)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.2)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.15)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.1)")},duration:40},{data:{color:"rgba(".concat(t.join(","),", 0.05)")},duration:40}]}},867:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getNeighbors=void 0;var n=i(525);e.getNeighbors=function(t,e){var i,o=((i={})[n.OBSTACLE_SIDES.TOP]=null,i[n.OBSTACLE_SIDES.LEFT]=null,i[n.OBSTACLE_SIDES.BOTTOM]=null,i[n.OBSTACLE_SIDES.RIGHT]=null,i);return Object.keys(o).forEach((function(i,r){var _=n.NEIGHBOR_OFFSET[i],a=t[e.y+(1-r%2)*_];if(a){var s=a[e.x+r%2*_];s&&(o[i]=s)}})),o}},571:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRelativeChunkMultiplier=void 0;var n=i(525);e.getRelativeChunkMultiplier=function(t){return t<n.TILE_SIZE/2?32:t<3*n.TILE_SIZE?16:t<6*n.TILE_SIZE?8:1}},414:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getTextureOffset=void 0;var n=i(525),o=i(4);e.getTextureOffset=function(t){var e=t.obstacle,i=e.position,r=((0,o.isWall)(e)||(0,o.isDoor)(e))&&e.intersectionType===n.INTERSECTION_TYPES.VERTICAL,_=!1;((0,o.isSprite)(e)||(0,o.isItem)(e))&&Math.abs(i.x1-i.x2)>Math.abs(i.y1-i.y2)&&(_=!0);var a=((0,o.isWall)(e)||(0,o.isDoor)(e))&&e.shouldReverseTexture?{x:i.x2,y:i.y2}:{x:i.x1,y:i.y1},s=r||_?a.x-t.intersectionVertex.x:a.y-t.intersectionVertex.y,E=r||_?Math.abs(i.x1-i.x2):Math.abs(i.y1-i.y2),c=Math.abs(s)/E;return Math.floor(c*n.TEXTURE_SIZE)}},929:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getIntersectionVertexWithPlane=e.unitVector=e.vectorSize=e.getIsVertexInTheTriangle=e.getVertexByPositionAndAngle=e.getAngleBetweenVertexes=e.getAreaSize=e.hasEqualPosition=e.toDegrees=e.toRadians=void 0;var n=i(525);function o(t,e,i,n,o,r){return Math.abs((t*(n-r)+i*(r-e)+o*(e-n))/2)}function r(t){var e=t.x,i=t.y;return Math.sqrt(e*e+i*i)}e.toRadians=function(t){return t*Math.PI/180},e.toDegrees=function(t){return 180/Math.PI*t},e.hasEqualPosition=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2},e.getAreaSize=o,e.getAngleBetweenVertexes=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(i,n)},e.getVertexByPositionAndAngle=function(t,e){return{x:t.x+n.RAY_LENGTH*Math.sin(e),y:t.y+n.RAY_LENGTH*Math.cos(e)}},e.getIsVertexInTheTriangle=function(t,e){var i=t.x,n=t.y,r=e.x1,_=e.y1,a=e.x2,s=e.y2,E=e.x3,c=e.y3,T=o(r,_,a,s,E,c),u=o(i,n,a,s,E,c),I=o(r,_,i,n,E,c),h=o(r,_,a,s,i,n);return Math.round(T)==Math.round(u+I+h)},e.vectorSize=r,e.unitVector=function(t){var e=t.x,i=t.y,n=r({x:e,y:i});return{x:e/n,y:i/n}},e.getIntersectionVertexWithPlane=function(t,e){var i=t.x1,n=t.x2,o=t.y1,r=t.y2,_=e.x1,a=e.y1,s=e.x2,E=e.y2;if(!(i===n&&o===r||_===s&&a===E)){var c=(E-a)*(n-i)-(s-_)*(r-o);if(0!==c){var T=((s-_)*(o-a)-(E-a)*(i-_))/c,u=((n-i)*(o-a)-(r-o)*(i-_))/c;if(!(T<0||T>1||u<0||u>1))return{x:i+T*(n-i),y:o+T*(r-o)}}}}},519:function(t,e,i){var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function _(t){try{s(n.next(t))}catch(t){r(t)}}function a(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(_,a)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,_={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;_;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return _.label++,{value:r[1],done:!1};case 5:_.label++,n=r[1],r=[0];continue;case 7:r=_.ops.pop(),_.trys.pop();continue;default:if(!((o=(o=_.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){_=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){_.label=r[1];break}if(6===r[0]&&_.label<o[1]){_.label=o[1],o=r;break}if(o&&_.label<o[2]){_.label=o[2],_.ops.push(r);break}o[2]&&_.ops.pop(),_.trys.pop();continue}r=e.call(t,_)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.canvas=void 0;var r=i(259),_=i(525),a=i(300),s=i(929);e.canvas=document.getElementById("canvas"),window.onload=function(){return n(this,void 0,void 0,(function(){function t(){p.resize(window.innerWidth,window.innerHeight)}function i(t){t.target&&(O=_.RESOLUTIONS_SCALE_VALUES[Number(t.target.value)],p.resolutionScale=O)}function n(t){if(t.target){var e=Number(t.target.value);L=(0,s.toRadians)(e),h.innerText=t.target.value,p.fov=L}}function E(t){"Escape"===t.key&&(S=!0,T.style.display="flex")}function c(){S&&(S=!1,T.style.display="none")}var T,u,I,h,l,S,O,L,p,f,P,d,R;return o(this,(function(o){return T=document.getElementById("menu-container"),u=document.getElementById("resolution-scale"),I=document.getElementById("fov"),h=document.getElementById("fovValue"),l=document.getElementById("continue-button"),S=!1,O=_.DEFAULT_RESOLUTION_SCALE,L=_.DEFAULT_FOV,I.value=String(_.DEFAULT_FOV_DEGREES),h.innerText=String(_.DEFAULT_FOV_DEGREES),u.value=String(_.RESOLUTIONS_SCALE_VALUES.indexOf(_.DEFAULT_RESOLUTION_SCALE)),p=new r.Scene(e.canvas,a.map,{height:window.innerHeight,width:window.innerWidth}),f=document.getElementById("fps"),P=0,d=0,R=0,function t(e){S||p.iterate(),p.render(),P=d;var i=(d=e)-P;R+=(i-R)/20,TIME_SCALE=Math.min(Math.round(i/_.DEFAULT_FRAME_DURATION*100)/100,1),requestAnimationFrame(t)}(0),setInterval((function(){f.innerHTML=(1e3/R).toFixed(1)+" fps"}),200),l.onclick=c,u.oninput=i,I.oninput=n,window.onkeydown=E,window.addEventListener("resize",t),e.canvas.onclick=function(){e.canvas.requestPointerLock()},[2]}))}))}},259:function(t,e,i){var n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var o=i(82),r=i(425),_=i(621),a=i(881),s=i(525),E=i(559),c=i(414),T=i(929),u=i(4),I=function(){function t(t,e,i){this._canvas=t,this._ctx=t.getContext("2d"),this._map=e,this._currentlyMovingObstacles=[],this._screenData=i;var n=(0,E.parseMap)(e),a=n.obstacles,s=n.startPosition,c=n.doors,T=n.enemies,u=n.map;this._parsedMap=u,this._obstacles=a,this._doors=c,this._enemies=T,this._hud=new o.Hud({ctx:this._ctx,screenData:this._screenData,initialWeapon:"PISTOL"}),this._wolf=new _.Wolf({angle:0,ammo:50,ctx:this._ctx,currentWeapon:"PISTOL",health:50,level:0,lives:3,maxHealth:100,position:s,score:0,screenData:this._screenData,weapons:["KNIFE","PISTOL"],onBoostPickup:this._hud.onBoostPickup,onShoot:this._hud.onShoot,onWeaponChange:this._hud.onWeaponChange,rawValue:"START_POS"}),this._minimap=new r.Minimap({ctx:this._ctx,obstacles:this._obstacles,rowsLength:this._map.length}),this.resize(this._screenData.width,this._screenData.height),window.addEventListener("keypress",this.handleKeyPress.bind(this))}return Object.defineProperty(t.prototype,"resolutionScale",{set:function(t){this._wolf.camera.resolutionScale=t,this._wolf.camera.changeRaysAmount(this._canvas.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{set:function(t){this._wolf.camera.fov=t,this._wolf.camera.changeRaysAmount(this._canvas.width)},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){this._canvas.width=t,this._canvas.height=e,this._screenData.height=e,this._screenData.width=t,this._wolf.camera.changeRaysAmount(this._canvas.width)},t.prototype.getNonGridObstacles=function(){var t=this,e=this._wolf.position,i=this._wolf.camera.angle,o=i-this._wolf.camera.fov,r=i+this._wolf.camera.fov,_=(0,T.getVertexByPositionAndAngle)(e,i),a=(0,T.getVertexByPositionAndAngle)(_,o),E=(0,T.getVertexByPositionAndAngle)(_,r),c={x1:e.x,y1:e.y,x2:a.x,y2:a.y,x3:E.x,y3:E.y};return n(n(n([],this._currentlyMovingObstacles,!0),this._doors,!0),this._enemies,!0).reduce((function(t,i){if((0,u.isEnemy)(i))return t.push(i.getPreparedSprite()),t;if(!(0,u.isWall)(i))return t.push(i),t;var n=i.position;return e.x<=n.x1&&t.push(i.getWallBySide(s.OBSTACLE_SIDES.LEFT,null)),e.x>=n.x2&&t.push(i.getWallBySide(s.OBSTACLE_SIDES.RIGHT,null)),e.y<=n.y1&&t.push(i.getWallBySide(s.OBSTACLE_SIDES.TOP,null)),e.y>=n.y2&&t.push(i.getWallBySide(s.OBSTACLE_SIDES.BOTTOM,null)),t}),[]).filter((function(e){var i=!!t._wolf.camera.getViewAngleIntersection(e.position),n=e.position,o=n.x1,r=n.y1,_=n.x2,a=n.y2;return i||(0,T.getIsVertexInTheTriangle)({x:o,y:r},c)||(0,T.getIsVertexInTheTriangle)({x:_,y:a},c)}))},t.prototype.moveObstacles=function(){var t=this;this._currentlyMovingObstacles.forEach((function(e){var i=e.iterateMovement();(0,u.isDoor)(e)&&i&&(e.isInStartPosition||(e.closeTimeout=new a.Timeout((function(){t._wolf.currentMatrixPosition.x>=e.endPositionMatrixCoordinates.x-1&&t._wolf.currentMatrixPosition.x<=e.endPositionMatrixCoordinates.x+1&&t._wolf.currentMatrixPosition.y>=e.endPositionMatrixCoordinates.y-1&&t._wolf.currentMatrixPosition.y<=e.endPositionMatrixCoordinates.y+1?e.closeTimeout.set(s.DOOR_TIMEOUT):(e.closeTimeout=null,e.hasCollision=!0,t._currentlyMovingObstacles.push(e))})),e.closeTimeout.set(s.DOOR_TIMEOUT),e.hasCollision=!1)),(0,u.isWall)(e)&&i&&(t._parsedMap[e.endPositionMatrixCoordinates.y][e.endPositionMatrixCoordinates.x]=e,t._parsedMap[e.matrixCoordinates.y][e.matrixCoordinates.x]=null),i&&(t._currentlyMovingObstacles=t._currentlyMovingObstacles.filter((function(t){return t!==e})))}))},t.prototype.handleKeyPress=function(t){if(32===t.keyCode){for(var e=null,i=null,n=0;n<this._obstacles.length;n++){var o=this._obstacles[n];if(!(0,u.isSprite)(o)&&!(0,u.isItem)(o)&&o.isMovable&&!this._currentlyMovingObstacles.includes(o)){var r=this._wolf.camera.getViewAngleIntersection(o.position),_=Math.sqrt(Math.pow(this._wolf.position.x-o.position.x1,2)+Math.pow(this._wolf.position.y-o.position.y1,2));r&&_<=2*s.TILE_SIZE&&(e=n,i=o)}}if(null===e||!i||(0,T.hasEqualPosition)(i.position,i.endPosition))return;this._currentlyMovingObstacles.push(i)}},t.prototype.iterate=function(){var t=this;this._wolf.iterate(this._parsedMap),this.moveObstacles(),this._obstacles.forEach((function(t){(0,u.isDoor)(t)&&t.closeTimeout&&t.closeTimeout.iterate()})),this._enemies.forEach((function(e){e.iterate(t._wolf.position,t._wolf.camera.angle)})),this._hud.iterate()},t.prototype.render=function(){this._ctx.imageSmoothingEnabled=!1,this._ctx.beginPath(),this._ctx.clearRect(0,0,this._screenData.width,this._screenData.height),this._ctx.closePath(),this._ctx.fillStyle="#383838",this._ctx.fillRect(0,0,1920,Math.ceil(this._screenData.height/2));for(var t=this._wolf.camera.getIntersections(this._parsedMap,this.getNonGridObstacles()),e=n([],t,!0).sort((function(t,e){return e.distance-t.distance})),i={startIndex:0,width:0,isInitial:!0,rays:[]},o=0;o<e.length;o++){var r=e[o],_=r.obstacle,a=r.index;i.isInitial&&(i.rays.push(r),i.width=1,i.startIndex=r.index,i.isInitial=!1);var E=(0,c.getTextureOffset)(r),T=e[o+1],I=T&&(0,c.getTextureOffset)(T),h=(null==T?void 0:T.index)===a||(null==T?void 0:T.index)===a+1,l=(null==T?void 0:T.distance)===r.distance,S=(null==T?void 0:T.obstacle.texture)===_.texture;if(h&&l&&S&&I===E)i.rays.push(T),i.width+=1;else{var O=!(0,u.isWall)(_)&&!(0,u.isDoor)(_)||_.intersectionType===s.INTERSECTION_TYPES.HORIZONTAL;E=(0,c.getTextureOffset)(i.rays[0]);var L=s.TILE_SIZE/r.distance*(Math.PI/this._wolf.camera.fov)*this._screenData.height/1.75,p=O&&((0,u.isWall)(_)||(0,u.isDoor)(_))?_.textureDark:_.texture,f=s.TEXTURE_SIZE,P=i.startIndex/this._wolf.camera.resolutionScale,d=this._screenData.height/2-L/2,R=i.width/this._wolf.camera.resolutionScale;i.rays=[],i.width=0,i.startIndex=0,i.isInitial=!0,this._ctx.drawImage(p,E,0,1,f,P,d,R,L)}}this._hud.render({currentWeapon:this._wolf.currentWeapon,ammo:this._wolf.ammo,lives:this._wolf.lives,score:this._wolf.score,level:this._wolf.level,health:this._wolf.health}),this._minimap.render(this._wolf.position,this._enemies)},t}();e.Scene=I},621:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Wolf=void 0;var r=i(539),_=i(525),a=i(431),s=i(4),E=function(t){function e(e){var i=t.call(this,e)||this;return i._ctx=e.ctx,i._ammo=e.ammo,i._score=e.score,i._lives=e.lives,i._level=e.level,i._weapons=e.weapons,i._camera=new a.Camera({raysAmount:e.screenData.width*_.DEFAULT_RESOLUTION_SCALE,position:e.position}),i.onBoostPickup=e.onBoostPickup,i.onWeaponChange=e.onWeaponChange,i.onShoot=e.onShoot,window.addEventListener("mousedown",i.handleMouseEvent.bind(i)),window.addEventListener("mouseup",i.handleMouseEvent.bind(i)),window.addEventListener("keydown",i.handleKeyDown.bind(i)),window.addEventListener("keyup",i.handleKeyUp.bind(i)),i}return o(e,t),Object.defineProperty(e.prototype,"ammo",{get:function(){return this._ammo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lives",{get:function(){return this._lives},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"health",{get:function(){return this._health},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentWeapon",{get:function(){return this._currentWeapon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShoot",{get:function(){return this._attackTimeout.isExpired&&(this._ammo>0||0===_.WEAPONS[this._currentWeapon].ammoPerAttack)},enumerable:!1,configurable:!0}),e.prototype.handleKeyDown=function(t){"1"===t.key?this.changeWeapon("KNIFE"):"2"===t.key?this.changeWeapon("PISTOL"):"3"===t.key&&this.changeWeapon("MACHINE_GUN"),87===t.keyCode?this._verticalSpeed=_.ACTOR_SPEED:83===t.keyCode?this._verticalSpeed=-_.ACTOR_SPEED:68===t.keyCode?this._horizontalSpeed=_.ACTOR_SPEED:65===t.keyCode&&(this._horizontalSpeed=-_.ACTOR_SPEED)},e.prototype.handleMouseEvent=function(t){1===t.buttons&&(this._isShooting=!0),0===t.buttons&&(this._isShooting=!1)},e.prototype.handleKeyUp=function(t){87===t.keyCode&&this._verticalSpeed>0||83===t.keyCode&&this._verticalSpeed<0?this._verticalSpeed=0:(68===t.keyCode&&this._horizontalSpeed>0||65===t.keyCode&&this._horizontalSpeed<0)&&(this._horizontalSpeed=0)},e.prototype.changeWeapon=function(t){this._weapons.includes(t)&&(this._currentWeapon=t,this.onWeaponChange(this._currentWeapon),this._attackTimeout.set(100),this._attackTimeout.onTimeoutExpire=null)},e.prototype.shoot=function(){var t=this;if(this.canShoot){var e=_.WEAPONS[this._currentWeapon];this._attackTimeout.set(e.frameDuration*e.shootFrameIdx),this._attackTimeout.onTimeoutExpire=function(){t._ammo-=_.WEAPONS[t._currentWeapon].ammoPerAttack,t._attackTimeout.set(e.frameDuration*(e.frameSet.length-e.shootFrameIdx)),t._attackTimeout.onTimeoutExpire=null},this.onShoot()}},e.prototype.move=function(t){var e=this;if(0!==this._horizontalSpeed||0!==this._verticalSpeed){var i={x:this._position.x,y:this._position.y},n=Math.sin(this._camera.angle)*this._verticalSpeed*TIME_SCALE,o=Math.cos(this._camera.angle)*this._verticalSpeed*TIME_SCALE,r=n+Math.sin(this._camera.angle+Math.PI/2)*this._horizontalSpeed*TIME_SCALE,a=o+Math.cos(this._camera.angle+Math.PI/2)*this._horizontalSpeed*TIME_SCALE;i.x+=r>=0?Math.min(r,_.ACTOR_SPEED*TIME_SCALE):Math.max(r,-_.ACTOR_SPEED*TIME_SCALE),i.y+=a>=0?Math.min(a,_.ACTOR_SPEED*TIME_SCALE):Math.max(a,-_.ACTOR_SPEED*TIME_SCALE);var E=function(n){if(n&&(n.hasCollision||(0,s.isItem)(n))){var o=!1,r=(0,s.isWall)(n)&&n.isInFinalPosition?n.endPositionMatrixCoordinates:n.matrixCoordinates,a={x1:r.x*_.TILE_SIZE,y1:r.y*_.TILE_SIZE,x2:r.x*_.TILE_SIZE+_.TILE_SIZE,y2:r.y*_.TILE_SIZE+_.TILE_SIZE};(0,s.isDoor)(n)&&("VERTICAL"===n.intersectionType&&(a.x1-=_.TILE_SIZE/2,a.x2+=_.TILE_SIZE/2),"HORIZONTAL"===n.intersectionType&&(a.y1-=_.TILE_SIZE/2,a.y2+=_.TILE_SIZE/2));var E=a.x1-.3*_.TILE_SIZE,c=a.y1-.3*_.TILE_SIZE,T=a.x2+.3*_.TILE_SIZE,u=a.y2+.3*_.TILE_SIZE;if(i.x>=E&&i.x<=T&&i.y>=c&&i.y<=u&&(n.hasCollision&&(e._position.x>=E&&e._position.x<=T&&(i.y=e._position.y),e._position.y>=c&&e._position.y<=u&&(i.x=e._position.x)),o=!0),o&&(0,s.isItem)(n)){var I=n.purpose;switch(I.affects){case"ammo":if(100===e._ammo)return;e._ammo+=I.value,e._ammo>100&&(e._ammo=100);break;case"health":if(e._health===e._maxHealth)return;e._health+=I.value,e._health>e._maxHealth&&(e._health=e._maxHealth);break;case"lives":e._lives+=I.value;break;case"score":e._score+=I.value;break;case"weapons":e._weapons.push(I.value)}e.onBoostPickup(),t[n.matrixCoordinates.y][n.matrixCoordinates.x]=null}}},c=this.currentMatrixPosition;E((t[c.y-1]||[])[c.x-1]),E((t[c.y-1]||[])[c.x]),E((t[c.y-1]||[])[c.x+1]),E((t[c.y]||[])[c.x-1]),E((t[c.y]||[])[c.x+1]),E((t[c.y+1]||[])[c.x-1]),E((t[c.y+1]||[])[c.x]),E((t[c.y+1]||[])[c.x+1]),this._position=i,this._camera.updatePosition(this._position)}},e.prototype.iterate=function(t){this.move(t),this._isShooting&&this.shoot(),this._attackTimeout.iterate()},e}(r.Actor);e.Wolf=E},431:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var n=i(525),o=i(867),r=i(571),_=i(929),a=i(592),s=i(519),E=i(4),c=function(){function t(t){this._angle=(0,_.toRadians)(180),this._resolutionScale=n.DEFAULT_RESOLUTION_SCALE,this._fov=n.DEFAULT_FOV,this._position=t.position,this._rays=[],s.canvas.addEventListener("mousemove",this.rotate.bind(this)),this.changeRaysAmount(t.raysAmount)}return Object.defineProperty(t.prototype,"resolutionScale",{get:function(){return this._resolutionScale},set:function(t){this._resolutionScale=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._fov},set:function(t){this._fov=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!1,configurable:!0}),t.prototype.updatePosition=function(t){for(var e=0;e<this._rays.length;e++)this._rays[e].move(t);this._position=t},t.prototype.getViewAngleIntersection=function(t){var e=(0,_.getVertexByPositionAndAngle)(this._position,this._angle);return(0,_.getIntersectionVertexWithPlane)({x1:this._position.x,y1:this._position.y,x2:e.x,y2:e.y},t)},t.prototype.getIntersections=function(t,e){for(var i=this,_=[],a=function(a){s._rays[a].cast(e).forEach((function(t){var e=t.obstacle,i=t.intersectionVertex,n=t.distance,o=(0,r.getRelativeChunkMultiplier)(n);_.push({intersectionVertex:i,obstacle:e,distance:Math.round(n*o)/o,index:a})})),s._rays[a].castDDA(t).forEach((function(e){var s=e.obstacle,c=e.intersectionVertex,T=e.distance,u=s.position,I=(0,r.getRelativeChunkMultiplier)(T),h=c,l=Math.round(T*I)/I,S=(0,o.getNeighbors)(t,s.matrixCoordinates),O=null;if((0,E.isSprite)(s)||(0,E.isItem)(s)){O=s.rotatePerpendicularlyToView(i._angle);var L=i._rays[a].cast([O]).sort((function(t,e){var i=t.distance;return e.distance-i}))[0];if(!L)return;l=Math.round(L.distance*I)/I,h=L.intersectionVertex}else(0,E.isWall)(s)&&(h.y!==u.y1&&h.x===u.x1&&(O=s.getWallBySide(n.OBSTACLE_SIDES.LEFT,S.LEFT)),h.y!==u.y1&&h.x===u.x2&&(O=s.getWallBySide(n.OBSTACLE_SIDES.RIGHT,S.RIGHT)),h.y===u.y1&&h.x!==u.x1&&(O=s.getWallBySide(n.OBSTACLE_SIDES.TOP,S.TOP)),h.y===u.y2&&h.x!==u.x1&&(O=s.getWallBySide(n.OBSTACLE_SIDES.BOTTOM,S.BOTTOM)));O&&_.push({obstacle:O,distance:l,index:a,intersectionVertex:h})}))},s=this,c=0;c<this._rays.length;c++)a(c);return _},t.prototype.changeRaysAmount=function(t){this._rays=[];for(var e=Math.floor(t*this._resolutionScale),i=Math.tan(this._fov/2),n=i/(e/2),o=0;o<e;o++){var r=this._angle+Math.atan(n*o-i);r<0&&(r+=2*Math.PI),r>2*Math.PI&&(r-=2*Math.PI),this._rays.push(new a.Ray({angle:r,cameraAngle:this._angle,initialPosition:this._position}))}},t.prototype.rotate=function(t){this._angle+=(0,_.toRadians)(t.movementX/3),this._angle=this._angle%(2*Math.PI),this._angle<0&&(this._angle+=2*Math.PI);for(var e=Math.tan(this._fov/2),i=e/(10*Math.floor(this._rays.length/10)/2),n=0;n<this._rays.length;n++){var o=this._angle+Math.atan(i*n-e);o<0&&(o+=2*Math.PI),o>2*Math.PI&&(o-=2*Math.PI),this._rays[n].changeAngle(o,this._angle)}},t}();e.Camera=c},592:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Ray=void 0;var n=i(525),o=i(929),r=i(4),_=function(){function t(t){this._angle=t.angle,this._cameraAngle=t.cameraAngle,this._cameraPosition={x1:0,y1:0,x2:0,y2:0},this.move(t.initialPosition)}return t.prototype.changeAngle=function(t,e){this._cameraAngle=e,this._angle=t,this.move({x:this._cameraPosition.x1,y:this._cameraPosition.y1})},t.prototype.fixFishEye=function(t){return t*Math.cos(this._angle-this._cameraAngle)},t.prototype.getDistance=function(t){return Math.sqrt(Math.pow(t.x-this._cameraPosition.x1,2)+Math.pow(t.y-this._cameraPosition.y1,2))},t.prototype.move=function(t){this._cameraPosition={x1:t.x,y1:t.y,x2:t.x+Math.sin(this._angle)*n.RAY_LENGTH,y2:t.y+Math.cos(this._angle)*n.RAY_LENGTH}},t.prototype.castDDA=function(t){var e,i,_=[],a=(0,o.unitVector)({x:this._cameraPosition.x2-this._cameraPosition.x1,y:this._cameraPosition.y2-this._cameraPosition.y1}),s=this._cameraPosition.x1/n.TILE_SIZE,E=this._cameraPosition.y1/n.TILE_SIZE,c={x:Math.floor(this._cameraPosition.x1/n.TILE_SIZE),y:Math.floor(this._cameraPosition.y1/n.TILE_SIZE)},T=Math.abs(1/a.x),u=Math.abs(1/a.y),I=1,h=1;a.x<0?(I=-1,e=(s-c.x)*T):e=(c.x+1-s)*T,a.y<0?(h=-1,i=(E-c.y)*u):i=(c.y+1-E)*u;for(var l="x",S=0;S<n.RAY_LENGTH/n.TILE_SIZE;)if(e<i?(c.x+=I,S=e,e+=T,l="x"):(c.y+=h,S=i,i+=u,l="y"),c.x>=0&&c.x<64&&c.y>=0&&c.y<64&&t[c.y]&&t[c.y][c.x]){var O=t[c.y][c.x];if((0,r.isDoor)(O)||(0,r.isMovableEntity)(O)&&O.isMoving)continue;var L={x:s*n.TILE_SIZE+a.x*S*n.TILE_SIZE,y:E*n.TILE_SIZE+a.y*S*n.TILE_SIZE};L[l]=Math.round(L[l]);var p=this.fixFishEye(S*n.TILE_SIZE);if((p>n.TILE_SIZE/5||!(0,r.isSprite)(O))&&_.push({obstacle:O,distance:p,intersectionVertex:L}),(0,r.isSprite)(O))continue;return _}return _},t.prototype.cast=function(t){for(var e=[],i=0,_=t;i<_.length;i++){var a=_[i],s=(0,o.getIntersectionVertexWithPlane)(this._cameraPosition,a.position);if(s){var E=this.fixFishEye(this.getDistance(s));(E>n.TILE_SIZE/5||!(0,r.isSprite)(a))&&e.push({intersectionVertex:s,distance:E,obstacle:a})}}return e},t}();e.Ray=_},539:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;var n=i(881),o=i(525),r=function(){function t(t){this._currentWeapon=t.currentWeapon,this._health=t.health,this._maxHealth=t.maxHealth,this._position=t.position,this._angle=t.angle,this._rawValue=t.rawValue,this._attackTimeout=new n.Timeout,this._isShooting=!1,this._horizontalSpeed=0,this._verticalSpeed=0}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentMatrixPosition",{get:function(){return{x:Math.floor(this._position.x/o.TILE_SIZE),y:Math.floor(this._position.y/o.TILE_SIZE)}},enumerable:!1,configurable:!0}),t}();e.Actor=r},485:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Enemy=void 0;var r=i(969),_=i(407),a=i(525),s=i(929),E=i(539),c=(0,s.toRadians)(45),T=c/2,u=function(t){function e(e){var i=t.call(this,e)||this;return i.isEnemy=!0,i._currentAction=e.initialAction,i._frameSet=e.frameSet,i._currentSide="FRONT",i._animationController=new _.AnimationController({frameSet:i._frameSet[i._currentAction][i._currentSide],isLoopAnimation:!0}),i._sprite=new r.SpriteObstacle({hasCollision:!1,position:{x1:i.currentMatrixPosition.x*a.TILE_SIZE,y1:i.currentMatrixPosition.y*a.TILE_SIZE,x2:i.currentMatrixPosition.x*a.TILE_SIZE+a.TILE_SIZE,y2:i.currentMatrixPosition.y*a.TILE_SIZE+a.TILE_SIZE},rawValue:i._rawValue,texture:i._animationController.currentFrame.data}),i}return o(e,t),e.prototype.updateSprite=function(t,e){var i=(0,s.getAngleBetweenVertexes)(this._position,t)+this._angle,n=this._currentSide;if(i<=0&&(i=2*Math.PI+i),i<=T||i>T+7*c?n="BACK":i<T+c?n="BACK_RIGHT":i<T+2*c?n="LEFT":i<T+3*c?n="FRONT_LEFT":i<T+4*c?n="FRONT":i<T+5*c?n="FRONT_RIGHT":i<T+6*c?n="RIGHT":i<T+7*c&&(n="BACK_LEFT"),n!==this._currentSide){this._currentSide=n;var o=this._animationController.currentFrameIdx;this._animationController.updateFrameSet(this._frameSet[this._currentAction][this._currentSide]),this._animationController.setActiveFrameIdx(o)}this._sprite.texture=this._animationController.currentFrame.data,this._sprite.position={x1:this.currentMatrixPosition.x*a.TILE_SIZE,y1:this.currentMatrixPosition.y*a.TILE_SIZE,x2:this.currentMatrixPosition.x*a.TILE_SIZE+a.TILE_SIZE,y2:this.currentMatrixPosition.y*a.TILE_SIZE+a.TILE_SIZE},this._sprite.rotatePerpendicularlyToView(e)},e.prototype.getPreparedSprite=function(){return this._sprite},e.prototype.iterate=function(t,e){this.updateSprite(t,e),this._attackTimeout.iterate(),this._animationController.iterate()},e}(E.Actor);e.Enemy=u},548:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Guard=void 0;var _=i(485),a=i(11),s=function(t){function e(e){return t.call(this,r(r({},e),{currentWeapon:"PISTOL",health:100,maxHealth:100,frameSet:(0,a.getEnemyFrameSet)("guard")}))||this}return o(e,t),e}(_.Enemy);e.Guard=s},460:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.DoorObstacle=void 0;var r=i(525),_=function(t){function e(e){var i=t.call(this,e)||this;return i._textureDark=e.textureDark,i.isVertical=e.isVertical,i.isDoor=!0,i.closeTimeout=e.closeTimeout,i.shouldReverseTexture=!e.isVertical,i.intersectionType=e.isVertical?r.INTERSECTION_TYPES.VERTICAL:r.INTERSECTION_TYPES.HORIZONTAL,i}return o(e,t),Object.defineProperty(e.prototype,"textureDark",{get:function(){return this._textureDark},enumerable:!1,configurable:!0}),e}(i(310).MovableEntity);e.DoorObstacle=_},295:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ItemObstacle=void 0;var r=function(t){function e(e){var i=t.call(this,e)||this;return i.isItem=!0,i.purpose=e.purpose,i}return o(e,t),e}(i(969).SpriteObstacle);e.ItemObstacle=r},969:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteObstacle=void 0;var r=i(525),_=function(t){function e(e){var i=t.call(this,e)||this;return i.isSprite=!0,i}return o(e,t),e.prototype.rotatePerpendicularlyToView=function(t){var e=this._position.x1,i=this._position.y1,n=(this._position.x2+e)/2,o=(this._position.y2+i)/2,_=-t;return this.position={x1:n+r.TILE_SIZE/2*Math.cos(_),y1:o+r.TILE_SIZE/2*Math.sin(_),x2:n-r.TILE_SIZE/2*Math.cos(_),y2:o-r.TILE_SIZE/2*Math.sin(_)},this},e}(i(361).Entity);e.SpriteObstacle=_},38:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.WallObstacle=void 0;var _=i(525),a=i(380),s=i(310),E=i(4),c=function(t){function e(e){var i=t.call(this,e)||this;return i.isWall=!0,i._textureDark=e.textureDark,i.intersectionType=_.INTERSECTION_TYPES.HORIZONTAL,i.shouldReverseTexture=!1,i}return o(e,t),Object.defineProperty(e.prototype,"textureDark",{get:function(){return this._textureDark},set:function(t){this._textureDark=t},enumerable:!1,configurable:!0}),e.prototype.getWallBySide=function(t,e){var i=t===_.OBSTACLE_SIDES.TOP||t===_.OBSTACLE_SIDES.BOTTOM,n={x1:this.position.x1+(t===_.OBSTACLE_SIDES.RIGHT?_.TILE_SIZE:0),y1:this.position.y1+(t===_.OBSTACLE_SIDES.BOTTOM?_.TILE_SIZE:0),x2:this.position.x2-(t===_.OBSTACLE_SIDES.LEFT?_.TILE_SIZE:0),y2:this.position.y2-(t===_.OBSTACLE_SIDES.TOP?_.TILE_SIZE:0)},o=this._texture,s=this._textureDark;return(0,E.isDoor)(e)&&(o=(0,a.getImageWithSource)("src/assets/textures/".concat(_.DOOR_SIDE_WALL_TEXTURE_ID,".png")),s=(0,a.getImageWithSource)("src/assets/textures/".concat(_.DOOR_SIDE_WALL_TEXTURE_DARK_ID,".png"))),r(r({},this),{position:n,intersectionType:i?_.INTERSECTION_TYPES.VERTICAL:_.INTERSECTION_TYPES.HORIZONTAL,shouldReverseTexture:!(0,E.isDoor)(e)&&(t===_.OBSTACLE_SIDES.LEFT||t===_.OBSTACLE_SIDES.BOTTOM),texture:o,textureDark:s})},e}(s.MovableEntity);e.WallObstacle=c},361:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0;var n=i(525),o=function(){function t(t){this._position=t.position,this._texture=t.texture,this._matrixCoordinates={x:Math.floor(this._position.x1/n.TILE_SIZE),y:Math.floor(this._position.y1/n.TILE_SIZE)},this.hasCollision=t.hasCollision,this.rawValue=t.rawValue}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._matrixCoordinates={x:Math.floor(this._position.x1/n.TILE_SIZE),y:Math.floor(this._position.y1/n.TILE_SIZE)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matrixCoordinates",{get:function(){return this._matrixCoordinates},enumerable:!1,configurable:!0}),t}();e.Entity=o},310:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.MovableEntity=void 0;var r=i(525),_=function(t){function e(e){var i=t.call(this,e)||this;return i._initialPosition=e.initialPosition,i._endPosition=e.endPosition,i._isMoving=e.isMoving,i._isInFinalPosition=e.isInFinalPosition,i._isInStartPosition=e.isInStartPosition,i._endPositionMatrixCoordinates={x:Math.floor(i._endPosition.x1/r.TILE_SIZE),y:Math.floor(i._endPosition.y1/r.TILE_SIZE)},i.isMovable=e.isMovable,i}return o(e,t),Object.defineProperty(e.prototype,"endPositionMatrixCoordinates",{get:function(){return this._endPositionMatrixCoordinates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialPosition",{get:function(){return this._initialPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMoving",{get:function(){return this._isMoving},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInFinalPosition",{get:function(){return this._isInFinalPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInStartPosition",{get:function(){return this._isInStartPosition},enumerable:!1,configurable:!0}),e.prototype.getPositionChange=function(t,e){return t>e?-r.OBSTACLES_MOVE_SPEED:t<e?r.OBSTACLES_MOVE_SPEED:0},e.prototype.iterateMovement=function(){if(this.isMovable){this._isMoving=!0;var t=this._isInStartPosition?this._endPosition:this._initialPosition;return this._position={x1:this._position.x1+this.getPositionChange(this._position.x1,t.x1)*TIME_SCALE,y1:this._position.y1+this.getPositionChange(this._position.y1,t.y1)*TIME_SCALE,x2:this._position.x2+this.getPositionChange(this._position.x2,t.x2)*TIME_SCALE,y2:this._position.y2+this.getPositionChange(this._position.y2,t.y2)*TIME_SCALE},Math.round(this._position.x1*r.TILE_SIZE)/r.TILE_SIZE===t.x1&&Math.round(this._position.y1*r.TILE_SIZE)/r.TILE_SIZE===t.y1&&Math.round(this._position.x2*r.TILE_SIZE)/r.TILE_SIZE===t.x2&&Math.round(this._position.y2*r.TILE_SIZE)/r.TILE_SIZE===t.y2&&(this._position=t,this._isMoving=!1,this._isInStartPosition=!this._isInStartPosition,this._isInFinalPosition=!this._isInFinalPosition,!0)}},e}(i(361).Entity);e.MovableEntity=_},407:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationController=void 0;var n=i(881),o=function(){function t(t){var e=t.frameSet,i=t.initialFrameIdx,o=void 0===i?0:i,r=t.isLoopAnimation,_=void 0!==r&&r,a=t.renderFunction,s=void 0===a?function(){}:a,E=t.onAnimationEnd,c=void 0===E?function(){}:E,T=t.onAnimationStart,u=void 0===T?function(){}:T,I=t.onFrameChange,h=void 0===I?function(){}:I;this._frameSet=e,this._currentFrameIdx=o,this._derivedRenderFunction=s,this._isLoopAnimation=_,this._onAnimationEnd=c,this._onAnimationStart=u,this._onFrameChange=h,this.playAnimation=this.playAnimation.bind(this),this._timeout=new n.Timeout(this.playAnimation),_&&this._timeout.set(this.currentFrame.duration)}return Object.defineProperty(t.prototype,"currentFrameIdx",{get:function(){return this._currentFrameIdx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._frameSet[this._currentFrameIdx]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentlyInTimeout",{get:function(){return!this._timeout.isExpired},enumerable:!1,configurable:!0}),t.prototype.playAnimation=function(){this._currentFrameIdx===this._frameSet.length-1?(this._timeout.reset(),this._currentFrameIdx=0,this._onAnimationEnd(),this._isLoopAnimation&&this._timeout.set(this.currentFrame.duration)):(0===this._currentFrameIdx&&this._onAnimationStart(),this._currentFrameIdx+=1,this._timeout.set(this.currentFrame.duration)),this._onFrameChange(this._currentFrameIdx)},t.prototype.updateFrameSet=function(t){this._frameSet=t,this._currentFrameIdx=0,this._timeout.reset(),this._isLoopAnimation&&this._timeout.set(this.currentFrame.duration)},t.prototype.setActiveFrameIdx=function(t){if(t>this._frameSet.length-1)throw Error("Frame ".concat(t," is out of bounds"));this._currentFrameIdx=t,this._timeout.reset(),this._isLoopAnimation&&this._timeout.set(this.currentFrame.duration)},t.prototype.iterate=function(){this._timeout.iterate()},t.prototype.render=function(){this._derivedRenderFunction(this._frameSet[this._currentFrameIdx].data)},t}();e.AnimationController=o},881:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Timeout=void 0;var i=function(){function t(t){void 0===t&&(t=null),this._timeoutTime=null,this._onTimeoutExpire=t}return Object.defineProperty(t.prototype,"onTimeoutExpire",{set:function(t){this._onTimeoutExpire=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpired",{get:function(){return!this._timeoutTime},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._timeoutTime=null},t.prototype.set=function(t){this._timeoutTime=(new Date).getTime()+t},t.prototype.iterate=function(){this._timeoutTime&&(new Date).getTime()>this._timeoutTime&&(this._timeoutTime=null,this._onTimeoutExpire&&this._onTimeoutExpire())},t}();e.Timeout=i},82:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hud=void 0;var n=i(407),o=i(525),r=i(798),_=i(11),a=function(){function t(t){this._ctx=t.ctx,this._screenData=t.screenData,this._currentFrameSet=r.ACTOR_PORTRAIT_FRAME_SETS.HEALTHY,this._scale=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH,this._width=Math.round(this._screenData.width*o.HUD_WIDTH_COEFFICIENT),this._height=Math.round(r.HUD_PANEL.HEIGHT*this._scale),this._offsetX=this._screenData.width/2-this._width/2,this._offsetY=this._screenData.height-this._height,this.onWeaponChange=this.onWeaponChange.bind(this),this.onBoostPickup=this.onBoostPickup.bind(this),this.onShoot=this.onShoot.bind(this),this.renderPortrait=this.renderPortrait.bind(this),this.renderWeapon=this.renderWeapon.bind(this),this.renderPostEffect=this.renderPostEffect.bind(this),this._portraitAnimation=new n.AnimationController({renderFunction:this.renderPortrait,frameSet:this._currentFrameSet,initialFrameIdx:0,isLoopAnimation:!0}),this._weaponAnimationController=new n.AnimationController({renderFunction:this.renderWeapon,initialFrameIdx:0,isLoopAnimation:!1,frameSet:o.WEAPONS[t.initialWeapon].frameSet}),this._postEffectAnimationController=new n.AnimationController({renderFunction:this.renderPostEffect,initialFrameIdx:0,isLoopAnimation:!1,frameSet:(0,_.generatePostEffectFrameSet)([255,255,0])})}return t.prototype.getHealthFrameSet=function(t){return t>85?r.ACTOR_PORTRAIT_FRAME_SETS.HEALTHY:t>75?r.ACTOR_PORTRAIT_FRAME_SETS.JUST_A_SCRATCH:t>50?r.ACTOR_PORTRAIT_FRAME_SETS.MINOR_DAMAGE:t>35?r.ACTOR_PORTRAIT_FRAME_SETS.MODERATE_DAMAGE:t>20?r.ACTOR_PORTRAIT_FRAME_SETS.SEVERE_DAMAGE:t>5?r.ACTOR_PORTRAIT_FRAME_SETS.SUFFERING:t>0?r.ACTOR_PORTRAIT_FRAME_SETS.NEAR_DEATH:r.ACTOR_PORTRAIT_FRAME_SETS.DEAD},t.prototype.renderPostEffect=function(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(0,0,this._screenData.width,this._screenData.height)},t.prototype.renderWeapon=function(t){var e=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH*r.HUD_PANEL.HEIGHT,i=this._screenData.height-e,n=this._screenData.width/2-i/2,_=this._screenData.height-i-e;this._ctx.drawImage(t,0,0,o.TEXTURE_SIZE,o.TEXTURE_SIZE,n,_,i,i)},t.prototype.renderPortrait=function(t){var e=this._offsetX+Math.round(r.HUD_PANEL.PORTRAIT_X_OFFSET*this._scale),i=this._offsetY+Math.round(r.HUD_PANEL.PORTRAIT_Y_OFFSET*this._scale);this._ctx.drawImage(t,0,0,r.PORTRAIT_WIDTH,r.PORTRAIT_HEIGHT,e,i,Math.round(r.PORTRAIT_WIDTH*this._scale),Math.round(r.PORTRAIT_HEIGHT*this._scale))},t.prototype.renderText=function(t,e){for(var i=String(t),n=Math.ceil(i.length*r.FONT_SYMBOL_WIDTH*this._scale),o=0;o<i.length;o++){var _=Number(i[o])*r.FONT_SYMBOL_WIDTH,a=o*r.FONT_SYMBOL_WIDTH,s=this._offsetX+e+Math.ceil(a*this._scale)-n/2,E=this._offsetY+Math.ceil(r.HUD_PANEL.INFO_Y_OFFSET*this._scale);this._ctx.drawImage(r.FONT_IMAGE,_,0,r.FONT_SYMBOL_WIDTH,r.FONT_SYMBOL_HEIGHT,s,E,Math.ceil(r.FONT_SYMBOL_WIDTH*this._scale),Math.ceil(r.FONT_SYMBOL_HEIGHT*this._scale))}},t.prototype.onWeaponChange=function(t){this._weaponAnimationController.updateFrameSet(o.WEAPONS[t].frameSet)},t.prototype.onBoostPickup=function(){this._postEffectAnimationController.updateFrameSet((0,_.generatePostEffectFrameSet)([255,255,0])),this._postEffectAnimationController.playAnimation()},t.prototype.onShoot=function(){this._weaponAnimationController.setActiveFrameIdx(0),this._weaponAnimationController.playAnimation()},t.prototype.iterate=function(){this._weaponAnimationController.iterate(),this._postEffectAnimationController.iterate(),this._portraitAnimation.iterate()},t.prototype.render=function(t){var e=t.ammo,i=t.lives,n=t.score,_=t.health,a=t.currentWeapon,s=t.level,E=this.getHealthFrameSet(_);E!==this._currentFrameSet&&(this._currentFrameSet=E,this._portraitAnimation.updateFrameSet(this._currentFrameSet)),this._scale=this._screenData.width*o.HUD_WIDTH_COEFFICIENT/r.HUD_PANEL.WIDTH,this._width=Math.round(this._screenData.width*o.HUD_WIDTH_COEFFICIENT),this._height=Math.round(r.HUD_PANEL.HEIGHT*this._scale),this._offsetX=this._screenData.width/2-this._width/2,this._offsetY=this._screenData.height-this._height,this._ctx.drawImage(r.HUD_PANEL.TEXTURE,0,0,r.HUD_PANEL.WIDTH,r.HUD_PANEL.HEIGHT,this._offsetX,this._offsetY,this._width,this._height),this._ctx.drawImage(o.WEAPONS[a].icon,0,0,r.WEAPON_ICON_WIDTH,r.WEAPON_ICON_HEIGHT,this._offsetX+Math.round(r.HUD_PANEL.WEAPON_X_OFFSET*this._scale),this._offsetY+Math.round(r.HUD_PANEL.WEAPON_Y_OFFSET*this._scale),Math.round(r.WEAPON_ICON_WIDTH*this._scale),Math.round(r.WEAPON_ICON_HEIGHT*this._scale)),this.renderText(s,r.HUD_PANEL.LEVEL_X_OFFSET*this._scale),this.renderText(n,r.HUD_PANEL.SCORE_X_OFFSET*this._scale),this.renderText(i,r.HUD_PANEL.LIVES_X_OFFSET*this._scale),this.renderText(_,r.HUD_PANEL.HEALTH_X_OFFSET*this._scale),this.renderText(e,r.HUD_PANEL.AMMO_X_OFFSET*this._scale),this._weaponAnimationController.render(),this._postEffectAnimationController.render(),this._portraitAnimation.render()},t}();e.Hud=a},425:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Minimap=void 0;var n=i(525),o=i(4),r=function(){function t(t){this._ctx=t.ctx,this._obstacles=t.obstacles,this._rowsLength=t.rowsLength}return t.prototype.render=function(t,e){for(var i=this._rowsLength*n.TILE_SIZE,r=0,_=this._obstacles;r<_.length;r++){var a=_[r];(0,o.isWall)(a)&&a.isMovable?this._ctx.fillStyle="orange":this._ctx.fillStyle="white",(0,o.isWall)(a)&&this._ctx.fillRect(a.initialPosition.x1*n.MAP_SCALE,(i-a.initialPosition.y1-n.TILE_SIZE)*n.MAP_SCALE,n.TILE_SIZE*n.MAP_SCALE,n.TILE_SIZE*n.MAP_SCALE)}for(var s=0,E=e;s<E.length;s++){var c=E[s];this._ctx.fillStyle="red",this._ctx.beginPath(),this._ctx.ellipse(c.position.x*n.MAP_SCALE,(i-c.position.y)*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,0,0,360),this._ctx.closePath(),this._ctx.fill()}this._ctx.fillStyle="blue",this._ctx.beginPath(),this._ctx.ellipse(t.x*n.MAP_SCALE,(i-t.y)*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,.8*n.TILE_SIZE*n.MAP_SCALE,0,0,360),this._ctx.closePath(),this._ctx.fill()},t}();e.Minimap=r},4:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isMovableEntity=e.isEnemy=e.isDoor=e.isWall=e.isItem=e.isSprite=void 0,e.isSprite=function(t){return!!t&&!!t.isSprite},e.isItem=function(t){return!!t&&!!t.isItem},e.isWall=function(t){return!!t&&!!t.isWall},e.isDoor=function(t){return!!t&&!!t.isDoor},e.isEnemy=function(t){return!!t&&!!t.isEnemy},e.isMovableEntity=function(t){return(0,e.isDoor)(t)||(0,e.isWall)(t)}},380:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getImageWithSource=void 0;var i={};e.getImageWithSource=function(t){if(i[t])return i[t];var e=new Image;return e.src=t,i[t]=e,e}},559:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseMap=void 0;var n=i(460),o=i(295),r=i(969),_=i(38),a=i(548),s=i(525),E=i(929),c=i(380);e.parseMap=function(t){for(var e=[],i=[],T=[],u=[],I={x:0,y:0},h={},l=0;l<t.length;l++){e.push([]);for(var S=0;S<t[l].length;S++)if((L=t[l][S])&&"string"==typeof L){var O=L.split("_");"END"===O[2]&&(h[O[1]]={x1:S*s.TILE_SIZE,y1:l*s.TILE_SIZE,x2:S*s.TILE_SIZE+s.TILE_SIZE,y2:l*s.TILE_SIZE+s.TILE_SIZE})}}for(l=0;l<t.length;l++)for(S=0;S<t[l].length;S++){var L;if(L=t[l][S]){if(L){if("START_POS"===L){I={x:S*s.TILE_SIZE+s.TILE_SIZE/2,y:l*s.TILE_SIZE+s.TILE_SIZE/2},e[l].push(null);continue}var p="number"==typeof L?[]:L.split("_"),f="number"!=typeof L?Number(p[0]):L;if(p&&p.includes("END")){e[l].push(null);continue}var P=S%63==0||l%63==0,d=p.includes("ENEMY"),R=p.includes("ITEM"),y=p.includes("SPRITE")||!1,A=!y&&p.includes("START"),m=!y&&s.DOOR_IDS.includes(f),M=!y&&(m||A)&&!P,x=!(d||R||y||m),g=!p.includes("HOLLOW"),D=null;R&&(D=s.ITEMS_PURPOSES[f]);var v=!(!t[l][S-1]||!t[l][S+1]),H={x1:S*s.TILE_SIZE+(!v&&m?.5*s.TILE_SIZE:0),y1:l*s.TILE_SIZE+(v&&m?.5*s.TILE_SIZE:0),x2:S*s.TILE_SIZE+(!v&&m?.5*s.TILE_SIZE:s.TILE_SIZE),y2:l*s.TILE_SIZE+(v&&m?.5*s.TILE_SIZE:s.TILE_SIZE)},W=A&&p?h[p[1]]:{x1:v?H.x1+s.TILE_SIZE:H.x1,y1:v?H.y1:H.y1-s.TILE_SIZE,x2:v?H.x2+s.TILE_SIZE:H.x2,y2:v?H.y2:H.y2-s.TILE_SIZE};if(A&&!W&&console.log(h,p),d){var b=p[1].toLowerCase(),C=p[2],N=p[3];if("guard"===b){var F=new a.Guard({rawValue:L,initialAction:C,angle:(0,E.toRadians)(s.ENEMY_FACING_DIRECTION_MAP[N]),position:{x:(H.x1+H.x2)/2,y:(H.y1+H.y2)/2}});u.push(F),e[l].push(null)}}else if(x){var w=new _.WallObstacle({initialPosition:H,position:H,endPosition:W,isInFinalPosition:!1,isInStartPosition:!0,isMovable:M,isMoving:!1,hasCollision:g,texture:(0,c.getImageWithSource)("src/assets/textures/".concat(f,".png")),textureDark:(0,c.getImageWithSource)("src/assets/textures/".concat(f+1,".png")),rawValue:L});e[l].push(w),i.push(w)}else if(y&&!R){var U=new r.SpriteObstacle({position:H,hasCollision:g,texture:(0,c.getImageWithSource)("src/assets/sprites/".concat(g?"static":"hollow","/").concat(f,".png")),rawValue:L});e[l].push(U),i.push(U)}else if(R){var G=new o.ItemObstacle({position:H,hasCollision:g,texture:(0,c.getImageWithSource)("src/assets/sprites/items/".concat(f,".png")),rawValue:L,purpose:D});e[l].push(G),i.push(G)}else if(m){var Z=new n.DoorObstacle({initialPosition:H,position:H,endPosition:W,isInFinalPosition:!1,isInStartPosition:!0,isMovable:M,isMoving:!1,isVertical:v,hasCollision:g,texture:(0,c.getImageWithSource)("src/assets/textures/".concat(f,".png")),textureDark:(0,c.getImageWithSource)("src/assets/textures/".concat(f+1,".png")),rawValue:L,closeTimeout:null});e[l].push(Z),i.push(Z),T.push(Z)}}}else e[l].push(null)}return{map:e,obstacles:i,startPosition:I,doors:T,enemies:u}}}},e={};!function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}(519)})();